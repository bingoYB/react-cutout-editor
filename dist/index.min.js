"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("react-konva"),r=require("konva");function n(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var o,i={exports:{}},s={};var a,c={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"production"===process.env.NODE_ENV?i.exports=function(){if(o)return s;o=1;var t=e,r=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,a=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,s={},l=null,u=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)i.call(t,o)&&!c.hasOwnProperty(o)&&(s[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===s[o]&&(s[o]=t[o]);return{$$typeof:r,type:e,key:l,ref:u,props:s,_owner:a.current}}return s.Fragment=n,s.jsx=l,s.jsxs=l,s}():i.exports=(a||(a=1,"production"!==process.env.NODE_ENV&&function(){var t,r=e,n=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),u=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),h=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),g=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),y=Symbol.iterator,v=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function w(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];!function(e,t,r){var n=v.ReactDebugCurrentFrame.getStackAddendum();""!==n&&(t+="%s",r=r.concat([n]));var o=r.map((function(e){return String(e)}));o.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,o)}("error",e,r)}function b(e){return e.displayName||"Context"}function x(e){if(null==e)return null;if("number"==typeof e.tag&&w("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case o:return"Portal";case a:return"Profiler";case s:return"StrictMode";case p:return"Suspense";case h:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case u:return b(e)+".Consumer";case l:return b(e._context)+".Provider";case d:return function(e,t,r){var n=e.displayName;if(n)return n;var o=t.displayName||t.name||"";return""!==o?r+"("+o+")":r}(e,e.render,"ForwardRef");case f:var t=e.displayName||null;return null!==t?t:x(e.type)||"Memo";case g:var r=e,n=r._payload,c=r._init;try{return x(c(n))}catch(e){return null}}return null}t=Symbol.for("react.module.reference");var k,E,S,j,C,O,M,R=Object.assign,_=0;function I(){}I.__reactDisabledLog=!0;var P,L=v.ReactCurrentDispatcher;function D(e,t,r){if(void 0===P)try{throw Error()}catch(e){var n=e.stack.trim().match(/\n( *(at )?)/);P=n&&n[1]||""}return"\n"+P+e}var A,N=!1,T="function"==typeof WeakMap?WeakMap:Map;function $(e,t){if(!e||N)return"";var r,n=A.get(e);if(void 0!==n)return n;N=!0;var o,i=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=L.current,L.current=null,function(){if(0===_){k=console.log,E=console.info,S=console.warn,j=console.error,C=console.group,O=console.groupCollapsed,M=console.groupEnd;var e={configurable:!0,enumerable:!0,value:I,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}_++}();try{if(t){var s=function(){throw Error()};if(Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(s,[])}catch(e){r=e}Reflect.construct(e,[],s)}else{try{s.call()}catch(e){r=e}e.call(s.prototype)}}else{try{throw Error()}catch(e){r=e}e()}}catch(t){if(t&&r&&"string"==typeof t.stack){for(var a=t.stack.split("\n"),c=r.stack.split("\n"),l=a.length-1,u=c.length-1;l>=1&&u>=0&&a[l]!==c[u];)u--;for(;l>=1&&u>=0;l--,u--)if(a[l]!==c[u]){if(1!==l||1!==u)do{if(l--,--u<0||a[l]!==c[u]){var d="\n"+a[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),"function"==typeof e&&A.set(e,d),d}}while(l>=1&&u>=0);break}}}finally{N=!1,L.current=o,function(){if(0==--_){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},e,{value:k}),info:R({},e,{value:E}),warn:R({},e,{value:S}),error:R({},e,{value:j}),group:R({},e,{value:C}),groupCollapsed:R({},e,{value:O}),groupEnd:R({},e,{value:M})})}_<0&&w("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=i}var p=e?e.displayName||e.name:"",h=p?D(p):"";return"function"==typeof e&&A.set(e,h),h}function F(e,t,r){if(null==e)return"";if("function"==typeof e)return $(e,!(!(n=e.prototype)||!n.isReactComponent));var n;if("string"==typeof e)return D(e);switch(e){case p:return D("Suspense");case h:return D("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case d:return $(e.render,!1);case f:return F(e.type,t,r);case g:var o=e,i=o._payload,s=o._init;try{return F(s(i),t,r)}catch(e){}}return""}A=new T;var z=Object.prototype.hasOwnProperty,W={},B=v.ReactDebugCurrentFrame;function V(e){if(e){var t=e._owner,r=F(e.type,e._source,t?t.type:null);B.setExtraStackFrame(r)}else B.setExtraStackFrame(null)}var H=Array.isArray;function U(e){return H(e)}function Y(e){return""+e}function q(e){if(function(e){try{return Y(e),!1}catch(e){return!0}}(e))return w("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),Y(e)}var G,X,K=v.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,r,o,i){var s,a={},c=null,l=null;for(s in void 0!==r&&(q(r),c=""+r),function(e){if(z.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(q(t.key),c=""+t.key),function(e){if(z.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(l=t.ref,function(e){"string"==typeof e.ref&&K.current}(t)),t)z.call(t,s)&&!Z.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps){var u=e.defaultProps;for(s in u)void 0===a[s]&&(a[s]=u[s])}if(c||l){var d="function"==typeof e?e.displayName||e.name||"Unknown":e;c&&function(e,t){var r=function(){G||(G=!0,w("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"key",{get:r,configurable:!0})}(a,d),l&&function(e,t){var r=function(){X||(X=!0,w("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};r.isReactWarning=!0,Object.defineProperty(e,"ref",{get:r,configurable:!0})}(a,d)}return function(e,t,r,o,i,s,a){var c={$$typeof:n,type:e,key:t,ref:r,props:a,_owner:s,_store:{}};return Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(c,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(c,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}(e,c,l,i,o,K.current,a)}var Q,ee=v.ReactCurrentOwner,te=v.ReactDebugCurrentFrame;function re(e){if(e){var t=e._owner,r=F(e.type,e._source,t?t.type:null);te.setExtraStackFrame(r)}else te.setExtraStackFrame(null)}function ne(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}function oe(){if(ee.current){var e=x(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Q=!1;var ie={};function se(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var r=function(e){var t=oe();if(!t){var r="string"==typeof e?e:e.displayName||e.name;r&&(t="\n\nCheck the top-level render call using <"+r+">.")}return t}(t);if(!ie[r]){ie[r]=!0;var n="";e&&e._owner&&e._owner!==ee.current&&(n=" It was passed a child from "+x(e._owner.type)+"."),re(e),w('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',r,n),re(null)}}}function ae(e,t){if("object"==typeof e)if(U(e))for(var r=0;r<e.length;r++){var n=e[r];ne(n)&&se(n,t)}else if(ne(e))e._store&&(e._store.validated=!0);else if(e){var o=function(e){if(null===e||"object"!=typeof e)return null;var t=y&&e[y]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof o&&o!==e.entries)for(var i,s=o.call(e);!(i=s.next()).done;)ne(i.value)&&se(i.value,t)}}function ce(e){var t,r=e.type;if(null!=r&&"string"!=typeof r){if("function"==typeof r)t=r.propTypes;else{if("object"!=typeof r||r.$$typeof!==d&&r.$$typeof!==f)return;t=r.propTypes}if(t){var n=x(r);!function(e,t,r,n,o){var i=Function.call.bind(z);for(var s in e)if(i(e,s)){var a=void 0;try{if("function"!=typeof e[s]){var c=Error((n||"React class")+": "+r+" type `"+s+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[s]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}a=e[s](t,s,n,r,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){a=e}!a||a instanceof Error||(V(o),w("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",n||"React class",r,s,typeof a),V(null)),a instanceof Error&&!(a.message in W)&&(W[a.message]=!0,V(o),w("Failed %s type: %s",r,a.message),V(null))}}(t,e.props,"prop",n,e)}else void 0===r.PropTypes||Q||(Q=!0,w("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",x(r)||"Unknown"));"function"!=typeof r.getDefaultProps||r.getDefaultProps.isReactClassApproved||w("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var le={};function ue(e,r,o,c,y,v){var b=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===a||e===s||e===p||e===h||e===m||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===f||e.$$typeof===l||e.$$typeof===u||e.$$typeof===d||e.$$typeof===t||void 0!==e.getModuleId)}(e);if(!b){var k,E="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(E+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),E+=oe(),null===e?k="null":U(e)?k="array":void 0!==e&&e.$$typeof===n?(k="<"+(x(e.type)||"Unknown")+" />",E=" Did you accidentally export a JSX literal instead of a component?"):k=typeof e,w("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",k,E)}var S=J(e,r,o,y,v);if(null==S)return S;if(b){var j=r.children;if(void 0!==j)if(c)if(U(j)){for(var C=0;C<j.length;C++)ae(j[C],e);Object.freeze&&Object.freeze(j)}else w("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else ae(j,e)}if(z.call(r,"key")){var O=x(e),M=Object.keys(r).filter((function(e){return"key"!==e})),R=M.length>0?"{key: someKey, "+M.join(": ..., ")+": ...}":"{key: someKey}";le[O+R]||(w('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',R,O,M.length>0?"{"+M.join(": ..., ")+": ...}":"{}",O),le[O+R]=!0)}return e===i?function(e){for(var t=Object.keys(e.props),r=0;r<t.length;r++){var n=t[r];if("children"!==n&&"key"!==n){re(e),w("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",n),re(null);break}}null!==e.ref&&(re(e),w("Invalid attribute `ref` supplied to `React.Fragment`."),re(null))}(S):ce(S),S}var de=function(e,t,r){return ue(e,t,r,!1)},pe=function(e,t,r){return ue(e,t,r,!0)};c.Fragment=i,c.jsx=de,c.jsxs=pe}()),c);var l,u,d=i.exports;exports.EditorMode=void 0,(l=exports.EditorMode||(exports.EditorMode={})).View="view",l.DrawLine="drawLine",l.Erase="erase",l.FrameSelect="select",exports.HistoryAction=void 0,(u=exports.HistoryAction||(exports.HistoryAction={})).DrawLine="drawLine",u.Reverse="reverse",u.AddSelect="select",u.AddMaskImage="addMaskImage";const p=e=>e===exports.EditorMode.Erase||e===exports.EditorMode.DrawLine;function h(t){const[r,n]=e.useState((()=>({records:t||[],currentIndex:(null==t?void 0:t.length)?t.length-1:-1}))),o=e.useCallback((e=>{n((t=>{const r=t.records.slice(0,t.currentIndex+1);return r.push(e),{records:r,currentIndex:t.currentIndex+1}}))}),[]),i=e.useCallback((()=>(n((e=>e.currentIndex>=0?Object.assign(Object.assign({},e),{currentIndex:e.currentIndex-1}):e)),r.records[r.currentIndex-1])),[]),s=e.useCallback((()=>(n((e=>e.currentIndex<e.records.length-1?Object.assign(Object.assign({},e),{currentIndex:e.currentIndex+1}):e)),r.records[r.currentIndex+1])),[]),a=e.useCallback((()=>{n({records:[],currentIndex:-1})}),[]),c=e.useCallback((e=>{e.ctrlKey&&"z"===e.key?(e.preventDefault(),i()):e.ctrlKey&&"y"===e.key&&(e.preventDefault(),s())}),[i,s]);e.useEffect((()=>(window.addEventListener("keydown",c),()=>{window.removeEventListener("keydown",c)})),[c]);const l=e.useMemo((()=>r.records.slice(0,r.currentIndex+1)),[r]);return e.useMemo((()=>({currentIndex:r.currentIndex,state:r.records[r.currentIndex],records:l,push:o,undo:i,redo:s,canUndo:r.currentIndex>=0,canRedo:r.currentIndex<r.records.length-1,clear:a,all:r.records})),[r,l,o,i,s,a])}function f(e,t,r){return.299*e+.587*t+.114*r>50}function g(e,t){const[r,n,o]=e,[i,s,a]=t;return Math.abs(r-i)<5&&Math.abs(n-s)<5&&Math.abs(o-a)<5}function m(e){if(!e)return;const t=e.getContext("2d",{willReadFrequently:!0});if(!t)return e;const r=t.getImageData(0,0,e.width,e.height).data;let n=e.width,o=e.height,i=0,s=0;for(let t=0;t<e.height;t++)for(let a=0;a<e.width;a++){r[4*(t*e.width+a)+3]>0&&(n=Math.min(n,a),o=Math.min(o,t),i=Math.max(i,a),s=Math.max(s,t))}if(n>i||o>s)return e;const a=document.createElement("canvas"),c=i-n+1,l=s-o+1;a.width=c,a.height=l;const u=a.getContext("2d");return u?(u.drawImage(e,n,o,c,l,0,0,c,l),a):e}const y=({onSelected:t,showBorderAfterDrag:r=!1,borderClassName:n,borderStyle:o})=>{const[i,s]=e.useState({left:0,top:0,width:0,height:0,display:"none"}),a=e.useRef({x:0,y:0}),c=e.useRef();function l(e,t,r){return Math.min(Math.max(e,t),r)}const u=e.useCallback((e=>{const n={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY},o=e.currentTarget.getBoundingClientRect();a.current={x:n.x,y:n.y};let i=!0;function u(e){if(!i)return;const t={x:l(e.clientX-o.x,0,o.width),y:l(e.clientY-o.y,0,o.height)},r=Math.min(a.current.x,t.x),n=Math.min(a.current.y,t.y),c=Math.abs(t.x-a.current.x),u=Math.abs(t.y-a.current.y);s({left:r,top:n,width:c,height:u,display:"block"})}function d(e){if(window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d),!i)return;i=!1;const n={x:l(e.clientX-o.x,0,o.width),y:l(e.clientY-o.y,0,o.height)};a.current.x===n.x&&a.current.y===n.y||null==t||t(a.current,n),s(r?e=>Object.assign(Object.assign({},e),{display:"block"}):e=>Object.assign(Object.assign({},e),{display:"none"}))}window.addEventListener("mousemove",u),window.addEventListener("mouseup",d),c.current=()=>{window.removeEventListener("mousemove",u),window.removeEventListener("mouseup",d)}}),[t,r]),p=e.useMemo((()=>d.jsx("div",{className:n,style:Object.assign(Object.assign({position:"absolute",border:"2px solid #1890ff",backgroundColor:"rgba(24, 144, 255, 0.1)",pointerEvents:"none",zIndex:999},o),i)})),[n,i,o]);return e.useEffect((()=>()=>{var e;null===(e=c.current)||void 0===e||e.call(c)}),[]),{onMouseDown:u,SelectionBorder:p}};var v=e,w=n((function(e,t,r){const n=v.useRef("loading"),o=v.useRef(),[i,s]=v.useState(0),a=v.useRef(),c=v.useRef(),l=v.useRef();return a.current===e&&c.current===t&&l.current===r||(n.current="loading",o.current=void 0,a.current=e,c.current=t,l.current=r),v.useLayoutEffect((function(){if(e){var i=document.createElement("img");return i.addEventListener("load",a),i.addEventListener("error",c),t&&(i.crossOrigin=t),r&&(i.referrerPolicy=r),i.src=e,function(){i.removeEventListener("load",a),i.removeEventListener("error",c)}}function a(){n.current="loaded",o.current=i,s(Math.random())}function c(){n.current="failed",o.current=void 0,s(Math.random())}}),[e,t,r]),[o.current,n.current]}));function b(){const[t,r]=e.useState({x:0,y:0});return{handleDragStart:e=>{const n=e.clientX-t.x,o=e.clientY-t.y,i=e=>{r({x:e.clientX-n,y:e.clientY-o})},s=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",s)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",s)},style:e.useMemo((()=>({transform:`translate(${t.x}px, ${t.y}px)`})),[t])}}var x=function(){return x=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},x.apply(this,arguments)};function k(e,t,r){if(r||2===arguments.length)for(var n,o=0,i=t.length;o<i;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))}function E(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}"function"==typeof SuppressedError&&SuppressedError;var S=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,j=E((function(e){return S.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),C="-ms-",O="-moz-",M="-webkit-",R="comm",_="rule",I="decl",P="@keyframes",L=Math.abs,D=String.fromCharCode,A=Object.assign;function N(e){return e.trim()}function T(e,t){return(e=t.exec(e))?e[0]:e}function $(e,t,r){return e.replace(t,r)}function F(e,t,r){return e.indexOf(t,r)}function z(e,t){return 0|e.charCodeAt(t)}function W(e,t,r){return e.slice(t,r)}function B(e){return e.length}function V(e){return e.length}function H(e,t){return t.push(e),e}function U(e,t){return e.filter((function(e){return!T(e,t)}))}var Y=1,q=1,G=0,X=0,K=0,Z="";function J(e,t,r,n,o,i,s,a){return{value:e,root:t,parent:r,type:n,props:o,children:i,line:Y,column:q,length:s,return:"",siblings:a}}function Q(e,t){return A(J("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function ee(e){for(;e.root;)e=Q(e.root,{children:[e]});H(e,e.siblings)}function te(){return K=X>0?z(Z,--X):0,q--,10===K&&(q=1,Y--),K}function re(){return K=X<G?z(Z,X++):0,q++,10===K&&(q=1,Y++),K}function ne(){return z(Z,X)}function oe(){return X}function ie(e,t){return W(Z,e,t)}function se(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ae(e){return N(ie(X-1,ue(91===e?e+2:40===e?e+1:e)))}function ce(e){for(;(K=ne())&&K<33;)re();return se(e)>2||se(K)>3?"":" "}function le(e,t){for(;--t&&re()&&!(K<48||K>102||K>57&&K<65||K>70&&K<97););return ie(e,oe()+(t<6&&32==ne()&&32==re()))}function ue(e){for(;re();)switch(K){case e:return X;case 34:case 39:34!==e&&39!==e&&ue(K);break;case 40:41===e&&ue(e);break;case 92:re()}return X}function de(e,t){for(;re()&&e+K!==57&&(e+K!==84||47!==ne()););return"/*"+ie(t,X-1)+"*"+D(47===e?e:re())}function pe(e){for(;!se(ne());)re();return ie(e,X)}function he(e){return function(e){return Z="",e}(fe("",null,null,null,[""],e=function(e){return Y=q=1,G=B(Z=e),X=0,[]}(e),0,[0],e))}function fe(e,t,r,n,o,i,s,a,c){for(var l=0,u=0,d=s,p=0,h=0,f=0,g=1,m=1,y=1,v=0,w="",b=o,x=i,k=n,E=w;m;)switch(f=v,v=re()){case 40:if(108!=f&&58==z(E,d-1)){-1!=F(E+=$(ae(v),"&","&\f"),"&\f",L(l?a[l-1]:0))&&(y=-1);break}case 34:case 39:case 91:E+=ae(v);break;case 9:case 10:case 13:case 32:E+=ce(f);break;case 92:E+=le(oe()-1,7);continue;case 47:switch(ne()){case 42:case 47:H(me(de(re(),oe()),t,r,c),c);break;default:E+="/"}break;case 123*g:a[l++]=B(E)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(E=$(E,/\f/g,"")),h>0&&B(E)-d&&H(h>32?ye(E+";",n,r,d-1,c):ye($(E," ","")+";",n,r,d-2,c),c);break;case 59:E+=";";default:if(H(k=ge(E,t,r,l,u,o,a,w,b=[],x=[],d,i),i),123===v)if(0===u)fe(E,t,k,k,b,i,d,a,x);else switch(99===p&&110===z(E,3)?100:p){case 100:case 108:case 109:case 115:fe(e,k,k,n&&H(ge(e,k,k,0,0,o,a,w,o,b=[],d,x),x),o,x,d,a,n?b:x);break;default:fe(E,k,k,k,[""],x,0,a,x)}}l=u=h=0,g=y=1,w=E="",d=s;break;case 58:d=1+B(E),h=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==te())continue;switch(E+=D(v),v*g){case 38:y=u>0?1:(E+="\f",-1);break;case 44:a[l++]=(B(E)-1)*y,y=1;break;case 64:45===ne()&&(E+=ae(re())),p=ne(),u=d=B(w=E+=pe(oe())),v++;break;case 45:45===f&&2==B(E)&&(g=0)}}return i}function ge(e,t,r,n,o,i,s,a,c,l,u,d){for(var p=o-1,h=0===o?i:[""],f=V(h),g=0,m=0,y=0;g<n;++g)for(var v=0,w=W(e,p+1,p=L(m=s[g])),b=e;v<f;++v)(b=N(m>0?h[v]+" "+w:$(w,/&\f/g,h[v])))&&(c[y++]=b);return J(e,t,r,0===o?_:a,c,l,u,d)}function me(e,t,r,n){return J(e,t,r,R,D(K),W(e,2,-2),0,n)}function ye(e,t,r,n,o){return J(e,t,r,I,W(e,0,n),W(e,n+1,-1),n,o)}function ve(e,t,r){switch(function(e,t){return 45^z(e,0)?(((t<<2^z(e,0))<<2^z(e,1))<<2^z(e,2))<<2^z(e,3):0}(e,t)){case 5103:return M+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return M+e+e;case 4789:return O+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return M+e+O+e+C+e+e;case 5936:switch(z(e,t+11)){case 114:return M+e+C+$(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return M+e+C+$(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return M+e+C+$(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return M+e+C+e+e;case 6165:return M+e+C+"flex-"+e+e;case 5187:return M+e+$(e,/(\w+).+(:[^]+)/,M+"box-$1$2"+C+"flex-$1$2")+e;case 5443:return M+e+C+"flex-item-"+$(e,/flex-|-self/g,"")+(T(e,/flex-|baseline/)?"":C+"grid-row-"+$(e,/flex-|-self/g,""))+e;case 4675:return M+e+C+"flex-line-pack"+$(e,/align-content|flex-|-self/g,"")+e;case 5548:return M+e+C+$(e,"shrink","negative")+e;case 5292:return M+e+C+$(e,"basis","preferred-size")+e;case 6060:return M+"box-"+$(e,"-grow","")+M+e+C+$(e,"grow","positive")+e;case 4554:return M+$(e,/([^-])(transform)/g,"$1"+M+"$2")+e;case 6187:return $($($(e,/(zoom-|grab)/,M+"$1"),/(image-set)/,M+"$1"),e,"")+e;case 5495:case 3959:return $(e,/(image-set\([^]*)/,M+"$1$`$1");case 4968:return $($(e,/(.+:)(flex-)?(.*)/,M+"box-pack:$3"+C+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+M+e+e;case 4200:if(!T(e,/flex-|baseline/))return C+"grid-column-align"+W(e,t)+e;break;case 2592:case 3360:return C+$(e,"template-","")+e;case 4384:case 3616:return r&&r.some((function(e,r){return t=r,T(e.props,/grid-\w+-end/)}))?~F(e+(r=r[t].value),"span",0)?e:C+$(e,"-start","")+e+C+"grid-row-span:"+(~F(r,"span",0)?T(r,/\d+/):+T(r,/\d+/)-+T(e,/\d+/))+";":C+$(e,"-start","")+e;case 4896:case 4128:return r&&r.some((function(e){return T(e.props,/grid-\w+-start/)}))?e:C+$($(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return $(e,/(.+)-inline(.+)/,M+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(B(e)-1-t>6)switch(z(e,t+1)){case 109:if(45!==z(e,t+4))break;case 102:return $(e,/(.+:)(.+)-([^]+)/,"$1"+M+"$2-$3$1"+O+(108==z(e,t+3)?"$3":"$2-$3"))+e;case 115:return~F(e,"stretch",0)?ve($(e,"stretch","fill-available"),t,r)+e:e}break;case 5152:case 5920:return $(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,r,n,o,i,s,a){return C+r+":"+n+a+(o?C+r+"-span:"+(i?s:+s-+n)+a:"")+e}));case 4949:if(121===z(e,t+6))return $(e,":",":"+M)+e;break;case 6444:switch(z(e,45===z(e,14)?18:11)){case 120:return $(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+M+(45===z(e,14)?"inline-":"")+"box$3$1"+M+"$2$3$1"+C+"$2box$3")+e;case 100:return $(e,":",":"+C)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return $(e,"scroll-","scroll-snap-")+e}return e}function we(e,t){for(var r="",n=0;n<e.length;n++)r+=t(e[n],n,e,t)||"";return r}function be(e,t,r,n){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case I:return e.return=e.return||e.value;case R:return"";case P:return e.return=e.value+"{"+we(e.children,n)+"}";case _:if(!B(e.value=e.props.join(",")))return""}return B(r=we(e.children,n))?e.return=e.value+"{"+r+"}":""}function xe(e,t,r,n){if(e.length>-1&&!e.return)switch(e.type){case I:return void(e.return=ve(e.value,e.length,r));case P:return we([Q(e,{value:$(e.value,"@","@"+M)})],n);case _:if(e.length)return function(e,t){return e.map(t).join("")}(r=e.props,(function(t){switch(T(t,n=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":ee(Q(e,{props:[$(t,/:(read-\w+)/,":-moz-$1")]})),ee(Q(e,{props:[t]})),A(e,{props:U(r,n)});break;case"::placeholder":ee(Q(e,{props:[$(t,/:(plac\w+)/,":"+M+"input-$1")]})),ee(Q(e,{props:[$(t,/:(plac\w+)/,":-moz-$1")]})),ee(Q(e,{props:[$(t,/:(plac\w+)/,C+"input-$1")]})),ee(Q(e,{props:[t]})),A(e,{props:U(r,n)})}return""}))}}var ke={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ee="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Se="active",je="data-styled-version",Ce="6.1.16",Oe="/*!sc*/\n",Me="undefined"!=typeof window&&"HTMLElement"in window,Re=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY?"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY:"production"!==process.env.NODE_ENV),_e=/invalid hook call/i,Ie=new Set,Pe=function(t,r){if("production"!==process.env.NODE_ENV){var n=r?' with the id of "'.concat(r,'"'):"",o="The component ".concat(t).concat(n," has been created dynamically.\n")+"You may see this warning because you've called styled inside another component.\nTo resolve this only create new StyledComponents outside of any render method and function component.",i=console.error;try{var s=!0;console.error=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];_e.test(e)?(s=!1,Ie.delete(o)):i.apply(void 0,k([e],t,!1))},e.useRef(),s&&!Ie.has(o)&&(console.warn(o),Ie.add(o))}catch(e){_e.test(e.message)&&Ie.delete(o)}finally{console.error=i}}},Le=Object.freeze([]),De=Object.freeze({});var Ae=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Ne=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,Te=/(^-|-$)/g;function $e(e){return e.replace(Ne,"-").replace(Te,"")}var Fe=/(a)(d)/gi,ze=function(e){return String.fromCharCode(e+(e>25?39:97))};function We(e){var t,r="";for(t=Math.abs(e);t>52;t=t/52|0)r=ze(t%52)+r;return(ze(t%52)+r).replace(Fe,"$1-$2")}var Be,Ve=function(e,t){for(var r=t.length;r;)e=33*e^t.charCodeAt(--r);return e},He=function(e){return Ve(5381,e)};function Ue(e){return"production"!==process.env.NODE_ENV&&"string"==typeof e&&e||e.displayName||e.name||"Component"}function Ye(e){return"string"==typeof e&&("production"===process.env.NODE_ENV||e.charAt(0)===e.charAt(0).toLowerCase())}var qe="function"==typeof Symbol&&Symbol.for,Ge=qe?Symbol.for("react.memo"):60115,Xe=qe?Symbol.for("react.forward_ref"):60112,Ke={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Ze={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},Je={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Qe=((Be={})[Xe]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Be[Ge]=Je,Be);function et(e){return("type"in(t=e)&&t.type.$$typeof)===Ge?Je:"$$typeof"in e?Qe[e.$$typeof]:Ke;var t}var tt=Object.defineProperty,rt=Object.getOwnPropertyNames,nt=Object.getOwnPropertySymbols,ot=Object.getOwnPropertyDescriptor,it=Object.getPrototypeOf,st=Object.prototype;function at(e,t,r){if("string"!=typeof t){if(st){var n=it(t);n&&n!==st&&at(e,n,r)}var o=rt(t);nt&&(o=o.concat(nt(t)));for(var i=et(e),s=et(t),a=0;a<o.length;++a){var c=o[a];if(!(c in Ze||r&&r[c]||s&&c in s||i&&c in i)){var l=ot(t,c);try{tt(e,c,l)}catch(e){}}}}return e}function ct(e){return"function"==typeof e}function lt(e){return"object"==typeof e&&"styledComponentId"in e}function ut(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function dt(e,t){if(0===e.length)return"";for(var r=e[0],n=1;n<e.length;n++)r+=e[n];return r}function pt(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function ht(e,t,r){if(void 0===r&&(r=!1),!r&&!pt(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var n=0;n<t.length;n++)e[n]=ht(e[n],t[n]);else if(pt(t))for(var n in t)e[n]=ht(e[n],t[n]);return e}function ft(e,t){Object.defineProperty(e,"toString",{value:t})}var gt="production"!==process.env.NODE_ENV?{1:"Cannot create styled-component for component: %s.\n\n",2:"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\n\n- Are you trying to reuse it across renders?\n- Are you accidentally calling collectStyles twice?\n\n",3:"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\n\n",4:"The `StyleSheetManager` expects a valid target or sheet prop!\n\n- Does this error occur on the client and is your target falsy?\n- Does this error occur on the server and is the sheet falsy?\n\n",5:"The clone method cannot be used on the client!\n\n- Are you running in a client-like environment on the server?\n- Are you trying to run SSR on the client?\n\n",6:"Trying to insert a new style tag, but the given Node is unmounted!\n\n- Are you using a custom target that isn't mounted?\n- Does your document not have a valid head element?\n- Have you accidentally removed a style tag manually?\n\n",7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:'ThemeProvider: Please make your "theme" prop an object.\n\n',9:"Missing document `<head>`\n\n",10:"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\n\n",11:"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\n\n",12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\n\n",14:'ThemeProvider: "theme" prop is required.\n\n',15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:"Reached the limit of how many styled components may be created at group %s.\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\nas for instance in your render method then you may be running into this limitation.\n\n",17:"CSSStyleSheet could not be found on HTMLStyleElement.\nHas styled-components' style tag been unmounted or altered by another script?\n",18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function mt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=e[0],n=[],o=1,i=e.length;o<i;o+=1)n.push(e[o]);return n.forEach((function(e){r=r.replace(/%[a-z]/,e)})),r}function yt(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return"production"===process.env.NODE_ENV?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):new Error(mt.apply(void 0,k([gt[e]],t,!1)).trim())}var vt=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,r=0;r<e;r++)t+=this.groupSizes[r];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var r=this.groupSizes,n=r.length,o=n;e>=o;)if((o<<=1)<0)throw yt(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(r),this.length=o;for(var i=n;i<o;i++)this.groupSizes[i]=0}for(var s=this.indexOfGroup(e+1),a=(i=0,t.length);i<a;i++)this.tag.insertRule(s,t[i])&&(this.groupSizes[e]++,s++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],r=this.indexOfGroup(e),n=r+t;this.groupSizes[e]=0;for(var o=r;o<n;o++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var r=this.groupSizes[e],n=this.indexOfGroup(e),o=n+r,i=n;i<o;i++)t+="".concat(this.tag.getRule(i)).concat(Oe);return t},e}(),wt=1<<30,bt=new Map,xt=new Map,kt=1,Et=function(e){if(bt.has(e))return bt.get(e);for(;xt.has(kt);)kt++;var t=kt++;if("production"!==process.env.NODE_ENV&&((0|t)<0||t>wt))throw yt(16,"".concat(t));return bt.set(e,t),xt.set(t,e),t},St=function(e,t){kt=t+1,bt.set(e,t),xt.set(t,e)},jt="style[".concat(Ee,"][").concat(je,'="').concat(Ce,'"]'),Ct=new RegExp("^".concat(Ee,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ot=function(e,t,r){for(var n,o=r.split(","),i=0,s=o.length;i<s;i++)(n=o[i])&&e.registerName(t,n)},Mt=function(e,t){for(var r,n=(null!==(r=t.textContent)&&void 0!==r?r:"").split(Oe),o=[],i=0,s=n.length;i<s;i++){var a=n[i].trim();if(a){var c=a.match(Ct);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(St(u,l),Ot(e,u,c[3]),e.getTag().insertRules(l,o)),o.length=0}else o.push(a)}}},Rt=function(e){for(var t=document.querySelectorAll(jt),r=0,n=t.length;r<n;r++){var o=t[r];o&&o.getAttribute(Ee)!==Se&&(Mt(e,o),o.parentNode&&o.parentNode.removeChild(o))}};var _t=function(e){var t=document.head,r=e||t,n=document.createElement("style"),o=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ee,"]")));return t[t.length-1]}(r),i=void 0!==o?o.nextSibling:null;n.setAttribute(Ee,Se),n.setAttribute(je,Ce);var s="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null;return s&&n.setAttribute("nonce",s),r.insertBefore(n,i),n},It=function(){function e(e){this.element=_t(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,r=0,n=t.length;r<n;r++){var o=t[r];if(o.ownerNode===e)return o}throw yt(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Pt=function(){function e(e){this.element=_t(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var r=document.createTextNode(t);return this.element.insertBefore(r,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Lt=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Dt=Me,At={isServer:!Me,useCSSOMInjection:!Re},Nt=function(){function e(e,t,r){void 0===e&&(e=De),void 0===t&&(t={});var n=this;this.options=x(x({},At),e),this.gs=t,this.names=new Map(r),this.server=!!e.isServer,!this.server&&Me&&Dt&&(Dt=!1,Rt(this)),ft(this,(function(){return function(e){for(var t=e.getTag(),r=t.length,n="",o=function(r){var o=function(e){return xt.get(e)}(r);if(void 0===o)return"continue";var i=e.names.get(o),s=t.getGroup(r);if(void 0===i||!i.size||0===s.length)return"continue";var a="".concat(Ee,".g").concat(r,'[id="').concat(o,'"]'),c="";void 0!==i&&i.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),n+="".concat(s).concat(a,'{content:"').concat(c,'"}').concat(Oe)},i=0;i<r;i++)o(i);return n}(n)}))}return e.registerId=function(e){return Et(e)},e.prototype.rehydrate=function(){!this.server&&Me&&Rt(this)},e.prototype.reconstructWithOptions=function(t,r){return void 0===r&&(r=!0),new e(x(x({},this.options),t),this.gs,r&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,r=e.target;return e.isServer?new Lt(r):t?new It(r):new Pt(r)}(this.options),new vt(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(Et(e),this.names.has(e))this.names.get(e).add(t);else{var r=new Set;r.add(t),this.names.set(e,r)}},e.prototype.insertRules=function(e,t,r){this.registerName(e,t),this.getTag().insertRules(Et(e),r)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(Et(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),Tt=/&/g,$t=/^\s*\/\/.*$/gm;function Ft(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Ft(e.children,t)),e}))}var zt=new Nt,Wt=function(){var e,t,r,n=De,o=n.options,i=void 0===o?De:o,s=n.plugins,a=void 0===s?Le:s,c=function(r,n,o){return o.startsWith(t)&&o.endsWith(t)&&o.replaceAll(t,"").length>0?".".concat(e):r},l=a.slice();l.push((function(e){e.type===_&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(Tt,t).replace(r,c))})),i.prefix&&l.push(xe),l.push(be);var u=function(n,o,s,a){void 0===o&&(o=""),void 0===s&&(s=""),void 0===a&&(a="&"),e=a,t=o,r=new RegExp("\\".concat(t,"\\b"),"g");var c=n.replace($t,""),u=he(s||o?"".concat(s," ").concat(o," { ").concat(c," }"):c);i.namespace&&(u=Ft(u,i.namespace));var d,p=[];return we(u,function(e){var t=V(e);return function(r,n,o,i){for(var s="",a=0;a<t;a++)s+=e[a](r,n,o,i)||"";return s}}(l.concat((d=function(e){return p.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),p};return u.hash=a.length?a.reduce((function(e,t){return t.name||yt(15),Ve(e,t.name)}),5381).toString():"",u}(),Bt=e.createContext({shouldForwardProp:void 0,styleSheet:zt,stylis:Wt});function Vt(){return e.useContext(Bt)}Bt.Consumer,e.createContext(void 0);var Ht=function(){function e(e,t){var r=this;this.inject=function(e,t){void 0===t&&(t=Wt);var n=r.name+t.hash;e.hasNameForId(r.id,n)||e.insertRules(r.id,n,t(r.rules,n,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,ft(this,(function(){throw yt(12,String(r.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Wt),this.name+e.hash},e}(),Ut=function(e){return e>="A"&&e<="Z"};function Yt(e){for(var t="",r=0;r<e.length;r++){var n=e[r];if(1===r&&"-"===n&&"-"===e[0])return e;Ut(n)?t+="-"+n.toLowerCase():t+=n}return t.startsWith("ms-")?"-"+t:t}var qt=function(e){return null==e||!1===e||""===e},Gt=function(e){var t,r,n=[];for(var o in e){var i=e[o];e.hasOwnProperty(o)&&!qt(i)&&(Array.isArray(i)&&i.isCss||ct(i)?n.push("".concat(Yt(o),":"),i,";"):pt(i)?n.push.apply(n,k(k(["".concat(o," {")],Gt(i),!1),["}"],!1)):n.push("".concat(Yt(o),": ").concat((t=o,null==(r=i)||"boolean"==typeof r||""===r?"":"number"!=typeof r||0===r||t in ke||t.startsWith("--")?String(r).trim():"".concat(r,"px")),";")))}return n};function Xt(e,t,r,n){if(qt(e))return[];if(lt(e))return[".".concat(e.styledComponentId)];if(ct(e)){if(!ct(i=e)||i.prototype&&i.prototype.isReactComponent||!t)return[e];var o=e(t);return"production"===process.env.NODE_ENV||"object"!=typeof o||Array.isArray(o)||o instanceof Ht||pt(o)||null===o||console.error("".concat(Ue(e)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),Xt(o,t,r,n)}var i;return e instanceof Ht?r?(e.inject(r,n),[e.getName(n)]):[e]:pt(e)?Gt(e):Array.isArray(e)?Array.prototype.concat.apply(Le,e.map((function(e){return Xt(e,t,r,n)}))):[e.toString()]}var Kt=He(Ce),Zt=function(){function e(e,t,r){this.rules=e,this.staticRulesId="",this.isStatic="production"===process.env.NODE_ENV&&(void 0===r||r.isStatic)&&function(e){for(var t=0;t<e.length;t+=1){var r=e[t];if(ct(r)&&!lt(r))return!1}return!0}(e),this.componentId=t,this.baseHash=Ve(Kt,t),this.baseStyle=r,Nt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,r){var n=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))n=ut(n,this.staticRulesId);else{var o=dt(Xt(this.rules,e,t,r)),i=We(Ve(this.baseHash,o)>>>0);if(!t.hasNameForId(this.componentId,i)){var s=r(o,".".concat(i),void 0,this.componentId);t.insertRules(this.componentId,i,s)}n=ut(n,i),this.staticRulesId=i}else{for(var a=Ve(this.baseHash,r.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u,"production"!==process.env.NODE_ENV&&(a=Ve(a,u));else if(u){var d=dt(Xt(u,e,t,r));a=Ve(a,d+l),c+=d}}if(c){var p=We(a>>>0);t.hasNameForId(this.componentId,p)||t.insertRules(this.componentId,p,r(c,".".concat(p),void 0,this.componentId)),n=ut(n,p)}}return n},e}(),Jt=e.createContext(void 0);Jt.Consumer;var Qt={},er=new Set;function tr(t,r,n){var o=lt(t),i=t,s=!Ye(t),a=r.attrs,c=void 0===a?Le:a,l=r.componentId,u=void 0===l?function(e,t){var r="string"!=typeof e?"sc":$e(e);Qt[r]=(Qt[r]||0)+1;var n="".concat(r,"-").concat(function(e){return We(He(e)>>>0)}(Ce+r+Qt[r]));return t?"".concat(t,"-").concat(n):n}(r.displayName,r.parentComponentId):l,d=r.displayName,p=void 0===d?function(e){return Ye(e)?"styled.".concat(e):"Styled(".concat(Ue(e),")")}(t):d,h=r.displayName&&r.componentId?"".concat($e(r.displayName),"-").concat(r.componentId):r.componentId||u,f=o&&i.attrs?i.attrs.concat(c).filter(Boolean):c,g=r.shouldForwardProp;if(o&&i.shouldForwardProp){var m=i.shouldForwardProp;if(r.shouldForwardProp){var y=r.shouldForwardProp;g=function(e,t){return m(e,t)&&y(e,t)}}else g=m}var v=new Zt(n,h,o?i.componentStyle:void 0);function w(t,r){return function(t,r,n){var o=t.attrs,i=t.componentStyle,s=t.defaultProps,a=t.foldedComponentIds,c=t.styledComponentId,l=t.target,u=e.useContext(Jt),d=Vt(),p=t.shouldForwardProp||d.shouldForwardProp;"production"!==process.env.NODE_ENV&&e.useDebugValue(c);var h=function(e,t,r){return void 0===r&&(r=De),e.theme!==r.theme&&e.theme||t||r.theme}(r,u,s)||De,f=function(e,t,r){for(var n,o=x(x({},t),{className:void 0,theme:r}),i=0;i<e.length;i+=1){var s=ct(n=e[i])?n(o):n;for(var a in s)o[a]="className"===a?ut(o[a],s[a]):"style"===a?x(x({},o[a]),s[a]):s[a]}return t.className&&(o.className=ut(o.className,t.className)),o}(o,r,h),g=f.as||l,m={};for(var y in f)void 0===f[y]||"$"===y[0]||"as"===y||"theme"===y&&f.theme===h||("forwardedAs"===y?m.as=f.forwardedAs:p&&!p(y,g)||(m[y]=f[y],p||"development"!==process.env.NODE_ENV||j(y)||er.has(y)||!Ae.has(g)||(er.add(y),console.warn('styled-components: it looks like an unknown prop "'.concat(y,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var v=function(t,r){var n=Vt(),o=t.generateAndInjectStyles(r,n.styleSheet,n.stylis);return"production"!==process.env.NODE_ENV&&e.useDebugValue(o),o}(i,f);"production"!==process.env.NODE_ENV&&t.warnTooManyClasses&&t.warnTooManyClasses(v);var w=ut(a,c);return v&&(w+=" "+v),f.className&&(w+=" "+f.className),m[Ye(g)&&!Ae.has(g)?"class":"className"]=w,n&&(m.ref=n),e.createElement(g,m)}(b,t,r)}w.displayName=p;var b=e.forwardRef(w);return b.attrs=f,b.componentStyle=v,b.displayName=p,b.shouldForwardProp=g,b.foldedComponentIds=o?ut(i.foldedComponentIds,i.styledComponentId):"",b.styledComponentId=h,b.target=o?i.target:t,Object.defineProperty(b,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];for(var n=0,o=t;n<o.length;n++)ht(e,o[n],!0);return e}({},i.defaultProps,e):e}}),"production"!==process.env.NODE_ENV&&(Pe(p,h),b.warnTooManyClasses=function(e,t){var r={},n=!1;return function(o){if(!n&&(r[o]=!0,Object.keys(r).length>=200)){var i=t?' with the id of "'.concat(t,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(e).concat(i,".\n")+"Consider using the attrs method, together with a style object for frequently changed styles.\nExample:\n  const Component = styled.div.attrs(props => ({\n    style: {\n      background: props.background,\n    },\n  }))`width: 100%;`\n\n  <Component />"),n=!0,r={}}}}(p,h)),ft(b,(function(){return".".concat(b.styledComponentId)})),s&&at(b,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),b}function rr(e,t){for(var r=[e[0]],n=0,o=t.length;n<o;n+=1)r.push(t[n],e[n+1]);return r}var nr=function(e){return Object.assign(e,{isCss:!0})};function or(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(ct(e)||pt(e))return nr(Xt(rr(Le,k([e],t,!0))));var n=e;return 0===t.length&&1===n.length&&"string"==typeof n[0]?Xt(n):nr(Xt(rr(n,t)))}function ir(e,t,r){if(void 0===r&&(r=De),!t)throw yt(1,t);var n=function(n){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return e(t,r,or.apply(void 0,k([n],o,!1)))};return n.attrs=function(n){return ir(e,t,x(x({},r),{attrs:Array.prototype.concat(r.attrs,n).filter(Boolean)}))},n.withConfig=function(n){return ir(e,t,x(x({},r),n))},n}var sr=function(e){return ir(tr,e)},ar=sr;Ae.forEach((function(e){ar[e]=sr(e)})),"production"!==process.env.NODE_ENV&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&console.warn("It looks like you've imported 'styled-components' on React Native.\nPerhaps you're looking to import 'styled-components/native'?\nRead more about this at https://www.styled-components.com/docs/basics#react-native");var cr="__sc-".concat(Ee,"__");"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&"undefined"!=typeof window&&(window[cr]||(window[cr]=0),1===window[cr]&&console.warn("It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\n\nSee https://s-c.sh/2BAXzed for more info."),window[cr]+=1);const lr=ar.div.attrs({className:"cutor-editor-container"})`
  display: flex;
  height: 100%;
  width: 100%;
  overflow: hidden;
`,ur=ar.div.attrs({className:"cutor-editor-panel"})`
  background-color: #d1d5db;
  padding: 0.75rem;
  width: 50%;
  max-width: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  position: relative;
`,dr=ar.div.attrs({className:"cutor-editor-image-container"})`
  position: relative;
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  cursor: ${e=>e.$isViewMode?"move":"default"};
`;const pr=e.createContext(null);function hr({children:t,initialState:r}){const n=function(t){const r=e.useRef(null),[n,o]=e.useState(Object.assign({mode:exports.EditorMode.DrawLine,lineWidth:20,scale:0},t)),i=e.useCallback((e=>{o((t=>Object.assign(Object.assign({},t),{mode:e})))}),[]),s=e.useCallback((e=>{o((t=>Object.assign(Object.assign({},t),{lineWidth:e})))}),[]),a=e.useCallback((e=>{o((t=>Object.assign(Object.assign({},t),{scale:e})))}),[]),c=e.useCallback((()=>{o((e=>Object.assign(Object.assign({},e),{reverse:!e.reverse})))}),[]),l=e.useCallback((()=>{var e;null===(e=r.current)||void 0===e||e.undo()}),[]),u=e.useCallback((()=>{var e;null===(e=r.current)||void 0===e||e.redo()}),[]);return{mode:n.mode,setMode:i,lineWidth:n.lineWidth,setLineWidth:s,reverse:n.reverse,toggleReverse:c,undo:l,redo:u,scale:n.scale,setScale:a,editorRef:r}}(r);return d.jsx(pr.Provider,{value:n,children:t})}function fr(){const t=e.useContext(pr);if(!t)throw new Error("useEditorToolsContext must be used within an EditorToolsProvider");return t}function gr(t){const r=e.useRef(t);return r.current=e.useMemo((()=>t),[t]),e.useCallback(((...e)=>r.current(...e)),[])}const mr={[exports.EditorMode.DrawLine]:"none",[exports.EditorMode.FrameSelect]:"crosshair",[exports.EditorMode.View]:"move",[exports.EditorMode.Erase]:"none"};r.pixelRatio=1;const yr=r=>{const{imgUrl:n,maskImgUrl:o,maskColor:i="#df4b26",maskOpacity:s=.5,onFrameSelected:a,isMaskFn:c}=r,{mode:l,scale:u,setScale:v,lineWidth:x,reverse:k,editorRef:E}=fr(),S=h(),j=b(),{img:C,imageSize:O,containerRef:M}=function(t,r){const[n]=w(t,"anonymous"),o=e.useRef(null),[i,s]=e.useState({width:0,height:0}),a=e.useCallback(((e,t)=>{if(0===e.width||0===e.height||0===t.width||0===t.height)return 1;const r=t.width/e.width,n=t.height/e.height;return Math.min(r,n)}),[]);return e.useEffect((()=>{if(o.current){const e=o.current,t={width:(null==n?void 0:n.width)||0,height:(null==n?void 0:n.height)||0},i=a(t,{width:e.clientWidth/2-24,height:e.clientHeight-24});r(i),s(t)}}),[a,n,r]),e.useEffect((()=>{const e=()=>{if(o.current){const e=o.current;r(a(i,{width:e.clientWidth/2-24,height:e.clientHeight-24}))}};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[a,i,r]),{setScale:r,img:n,imageSize:i,containerRef:o}}(n,v),R=function(t,r,n,o){const i=e.useRef(!1),[s,a]=e.useState(null),c=o,[l,u]=e.useState(null),p=e.useCallback((e=>{i.current=!0;const r={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};r&&(a({mode:t,strokeWidth:c/n,points:[r.x/n,r.y/n]}),u({x:r.x,y:r.y}))}),[t,c,n]),h=e.useCallback((e=>{const t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};t&&u({x:t.x,y:t.y}),i.current&&t&&a((e=>e?Object.assign(Object.assign({},e),{points:[...e.points,t.x/n,t.y/n]}):null))}),[n]),f=e.useCallback((()=>{i.current&&s&&(i.current=!1,r.push({action:exports.HistoryAction.DrawLine,data:s}),a(null))}),[s,r]),g=e.useCallback((e=>{if(u(null),!i.current)return;const t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};t&&a((e=>e?Object.assign(Object.assign({},e),{points:[...e.points,t.x/n,t.y/n]}):null))}),[n]);e.useEffect((()=>(window.addEventListener("mouseup",f),()=>{window.removeEventListener("mouseup",f)})),[f]);const m=e.useMemo((()=>{if(!l)return null;const e=c/2,t=c>2?1:0;return d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${c+2} ${c+2}`,width:c+2,height:c+2,style:{position:"absolute",top:(null==l?void 0:l.y)-e-t,left:(null==l?void 0:l.x)-e-t,zIndex:99,pointerEvents:"none"},children:d.jsx("circle",{cx:e+t,cy:e+t,r:e,fill:"rgba(255, 255, 255, 0.5)",stroke:"white",strokeWidth:t})})}),[l,c]);return{isDrawing:i.current,currentLine:s,handleMouseDown:p,handleMouseMove:h,handleMouseUp:f,handleMouseLeave:g,strokeWidth:c,brushCursor:m}}(l,S,u,x),_=y({onSelected:a,showBorderAfterDrag:!1}),I=gr((e=>{switch(l){case exports.EditorMode.DrawLine:case exports.EditorMode.Erase:R.handleMouseDown(e);break;case exports.EditorMode.FrameSelect:_.onMouseDown(e);break;case exports.EditorMode.View:j.handleDragStart(e)}})),P=gr((e=>{switch(l){case exports.EditorMode.DrawLine:case exports.EditorMode.Erase:R.handleMouseMove(e);break;default:return}})),L=gr((e=>{switch(l){case exports.EditorMode.DrawLine:case exports.EditorMode.Erase:R.handleMouseUp();break;default:return}})),D=gr((e=>{switch(l){case exports.EditorMode.DrawLine:case exports.EditorMode.Erase:R.handleMouseLeave(e);break;default:return}})),A=gr((e=>{if(e.ctrlKey){e.preventDefault();const t=-1e-4*e.deltaY,r=Math.min(Math.max(u+t,.001),5);v(r)}}));e.useEffect((()=>{const e=M.current;return e&&e.addEventListener("wheel",A,{passive:!1}),()=>{e&&e.removeEventListener("wheel",A)}}),[M,A]);const N=e.useMemo((()=>({width:O.width*u,height:O.height*u})),[O,u]),T=gr((async function(e){const t=await function(e){return new Promise(((t,r)=>{const n=new Image;n.crossOrigin="anonymous",n.src=e,n.onload=()=>{t({width:n.width,height:n.height,img:n})},n.onerror=t=>{r(new Error("image load error: "+e+t))},n.onabort=()=>{r(new Error("image load abort: "+e))},setTimeout((()=>{r(new Error("image load timeout: "+e))}),1e5)}))}(e);S.push({action:exports.HistoryAction.AddMaskImage,data:{url:e,image:t.img}})}));e.useEffect((()=>{o&&T(o)}),[]);const $=e.useCallback((e=>{const t=O,r=document.createElement("canvas"),n=e||(t.width<1200?1:1200/t.width);r.width=t.width*n,r.height=t.height*n;const o=r.getContext("2d");if(!o)throw new Error("canvas context is null");return{canvas:r,ctx:o,scale:n}}),[O]),F=e.useCallback(((e,t,r,n)=>{if(e.lineCap="round",e.lineJoin="round",e.strokeStyle=i,(n?t.mode!==exports.EditorMode.Erase:t.mode===exports.EditorMode.Erase)?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="source-over",!(t.points.length<2)){e.lineWidth=t.strokeWidth*r,e.beginPath(),e.moveTo(t.points[0]*r,t.points[1]*r);for(let n=2;n<t.points.length;n+=2)e.lineTo(t.points[n]*r,t.points[n+1]*r);e.stroke()}}),[i]),z=e.useCallback(((e,t)=>{const{canvas:r,ctx:n,scale:o}=$(t);if(!n)return null;if(0===e.length&&!R.currentLine)return r;for(let t=0;t<e.length;t++){const i=e[t];let s=i.data;switch(i.action){case exports.HistoryAction.DrawLine:F(n,s,o);break;case exports.HistoryAction.AddMaskImage:n.globalCompositeOperation="destination-over",n.drawImage(s.image,0,0,r.width,r.height)}}const s=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}(i);if(!s)return null;const a=n.getImageData(0,0,r.width,r.height),l=a.data,u=c||f;for(let e=3;e<l.length;e+=4){const t=u(l[e-3],l[e-2],l[e-1],l[e])||g([l[e-3],l[e-2],l[e-1]],s);(k?!t:t)?(l[e-3]=s[0],l[e-2]=s[1],l[e-1]=s[2],l[e]=255):(l[e-3]=0,l[e-2]=0,l[e-1]=0,l[e]=0)}return n.putImageData(a,0,0),r}),[$,R.currentLine,i,c,F,k]),[W,B]=e.useState(null),[V,H]=e.useState(null),U=e.useCallback((function(e,t,r){const{ctx:n,canvas:o}=$(r);return n.drawImage(e,0,0,o.width,o.height),n.globalCompositeOperation="destination-out",t?(n.drawImage(t,0,0,o.width,o.height),o):o}),[$]),Y=e.useRef(null);return e.useEffect((()=>{if(0===S.records.length||!N.width||!C)return;const e=z(S.records),t=U(C,e);Y.current=e,B(e),H(t)}),[C,S.records,R.currentLine,z,U,N.width]),e.useEffect((()=>{if(R.currentLine&&C){const{canvas:e,ctx:t,scale:r}=$();Y.current&&t.drawImage(Y.current,0,0,e.width,e.height),F(t,R.currentLine,r,k),B(e);const n=U(C,W);H(n)}}),[$,R.currentLine,C,W,F,U,k]),e.useEffect((()=>{E&&(E.current={async getMaskImage(){const e=z(S.records,1);return null==e?void 0:e.toDataURL("image/png")},async getProcessedImage(){var e;if(!C)throw new Error("img is null");const t=z(S.records,1),r=U(C,t,1);return{img:null==r?void 0:r.toDataURL("image/png"),trimImg:null===(e=m(r))||void 0===e?void 0:e.toDataURL("image/png")}},addMaskImageUrl:T,clearHistory:S.clear,undo:S.undo,redo:S.redo,setScale:v})}),[T,E,S,C,W,V,z,U,v]),d.jsx(lr,{ref:M,children:C&&O.width>0&&O.height>0&&d.jsxs(d.Fragment,{children:[d.jsx(ur,{children:d.jsxs(dr,{width:N.width,height:N.height,$isViewMode:l===exports.EditorMode.View,style:Object.assign(Object.assign({},j.style),{cursor:mr[l]}),onMouseDown:I,onMouseMove:P,onMouseUp:L,onMouseLeave:D,children:[p(l)&&R.brushCursor,_.SelectionBorder,d.jsxs(t.Stage,{width:N.width,height:N.height,children:[d.jsx(t.Layer,{children:d.jsx(t.Image,{image:C,x:0,y:0,width:N.width,height:N.height})}),d.jsx(t.Layer,{opacity:s,children:W&&d.jsx(t.Image,{image:W,x:0,y:0,width:N.width,height:N.height})})]})]})}),d.jsx(ur,{children:d.jsxs(dr,{width:N.width,height:N.height,$isViewMode:l===exports.EditorMode.View,style:j.style,onMouseDown:e=>{l===exports.EditorMode.View&&j.handleDragStart(e)},children:[_.SelectionBorder,p(l)&&R.brushCursor,d.jsxs(t.Stage,{width:N.width,height:N.height,children:[d.jsx(t.Layer,{children:d.jsx(t.Shape,{sceneFunc:e=>{!function(e,t){const r=document.createElement("canvas");r.width=16,r.height=16;const n=r.getContext("2d");n&&(n.fillStyle="#dfdfdf",n.fillRect(0,0,16,16),n.fillStyle="#d4d4d4",n.beginPath(),n.moveTo(0,0),n.lineTo(8,0),n.lineTo(8,8),n.lineTo(0,8),n.closePath(),n.fill(),n.beginPath(),n.moveTo(8,8),n.lineTo(16,8),n.lineTo(16,16),n.lineTo(8,16),n.closePath(),n.fill()),e.fillStyle=e.createPattern(r,"repeat"),e.fillRect(0,0,t.width,t.height)}(e,N)}})}),d.jsx(t.Layer,{children:V&&d.jsx(t.Image,{image:V,x:0,y:0,width:N.width,height:N.height})})]})]})})]})})},vr=ar.div`
  display: flex;
  gap: 0.5rem;
  ${e=>e.className}
`,wr=ar.div`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
  width: fit-content;
  ${e=>e.className}
`,br=ar.button`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  border-radius: 4px;

  border: none;
  background-color: transparent;
  cursor: pointer;
  color: white;
  line-height: 0;

  &:hover {
    background-color: #9ca3af;
  }

  &:focus {
    outline: none;
  }

  ${e=>e.$isActive&&or`
      background-color: #9ca3af;
    `}
`,xr=ar.div`
  height: 1rem;
  width: 1px;
  background-color: #9ca3af;
  margin: 0 0.25rem;
`,kr=ar.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
`,Er=ar.span`
  font-size: 0.75rem;
  white-space: nowrap;
`,Sr=ar.input`
  width: 100%;
  height: 0.375rem;
  background-color: #9ca3af;
  border-radius: 0.5rem;
  appearance: none;
  cursor: pointer;
`,jr=ar.span`
  font-size: 0.75rem;
  min-width: 1.5rem;
  text-align: center;
`,Cr=ar.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
  width: fit-content;
`,Or=ar.span`
  font-size: 0.875rem;
  font-weight: 500;
  min-width: 2.5rem;
  text-align: center;
`,Mr=ar.div`
  svg {
    height: 20px;
    width: 20px;
  }
`;function Rr({step:e=5,className:t=""}){const{mode:r,setMode:n,lineWidth:o,setLineWidth:i,scale:s,reverse:a,setScale:c,undo:l,redo:u,toggleReverse:p,editorRef:h}=fr(),f=a?r===exports.EditorMode.Erase:r===exports.EditorMode.DrawLine,g=a?r===exports.EditorMode.DrawLine:r===exports.EditorMode.Erase;return d.jsxs(vr,{className:t,children:[d.jsxs(wr,{children:[d.jsx(br,{$isActive:f,onClick:()=>{n(a?exports.EditorMode.Erase:exports.EditorMode.DrawLine)},"aria-label":"Hand tool",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),d.jsx("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),d.jsx("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),d.jsx("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]})})}),d.jsx(br,{$isActive:g,onClick:()=>{n(a?exports.EditorMode.DrawLine:exports.EditorMode.Erase)},"aria-label":"Paint tool",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"}),d.jsx("path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"}),d.jsx("path",{d:"M14.5 17.5 4.5 15"})]})})}),d.jsx(br,{$isActive:r===exports.EditorMode.Erase,onClick:()=>n(exports.EditorMode.Erase),"aria-label":"Erase tool",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),d.jsx("path",{d:"M22 21H7"}),d.jsx("path",{d:"m5 11 9 9"})]})})}),d.jsx(xr,{}),d.jsx(br,{onClick:l,"aria-label":"Undo",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M9 14 4 9l5-5"}),d.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]})})}),d.jsx(br,{onClick:u,"aria-label":"Redo",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"m15 14 5-5-5-5"}),d.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13"})]})})}),d.jsx(br,{onClick:p,"aria-label":"Flip horizontally",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3"}),d.jsx("path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"}),d.jsx("path",{d:"M12 20v2"}),d.jsx("path",{d:"M12 14v2"}),d.jsx("path",{d:"M12 8v2"}),d.jsx("path",{d:"M12 2v2"})]})})}),d.jsx(br,{onClick:()=>{var e;null===(e=h.current)||void 0===e||e.getProcessedImage().then((e=>{if(!e.img)return;const t=document.createElement("a");t.href=e.img,t.download="image.png",t.click()}))},"aria-label":"Download image",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),d.jsx("polyline",{points:"7 10 12 15 17 10"}),d.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})})]}),(r===exports.EditorMode.DrawLine||r===exports.EditorMode.Erase)&&d.jsxs(kr,{children:[d.jsx(Er,{children:"画笔大小:"}),d.jsx(Sr,{type:"range",min:"1",max:"100",value:o,onChange:e=>i(Number(e.target.value)),"aria-label":"Brush size"}),d.jsx(jr,{children:o})]}),d.jsxs(Cr,{children:[d.jsx(br,{onClick:()=>{c(s-e/100)},"aria-label":"Zoom out",children:d.jsx(Mr,{children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})}),d.jsxs(Or,{children:[Math.round(100*s),"%"]}),d.jsx(br,{onClick:()=>{c(s+e/100)},"aria-label":"Zoom in",children:d.jsx(Mr,{children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[d.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),d.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})})]})]})}const _r=ar.div.attrs({className:"cutor-editor"})`
  height: 100%;
  width: 100%;

  .cutor-editor-container {
    height: calc(100% - 84px);
  }

  .cutor-editor-tools {
    margin-top: 24px;
    justify-content: center;
  }
`;exports.EditorContextProvider=hr,exports.EditorCore=yr,exports.ToolControlPanel=Rr,exports.default=function(e){return d.jsx(_r,{style:{height:e.height},children:d.jsxs(hr,{initialState:{mode:exports.EditorMode.FrameSelect},children:[d.jsx(yr,Object.assign({},e)),d.jsx(Rr,{className:"cutor-editor-tools"})]})})},exports.useDragble=b,exports.useEditorContext=fr,exports.useFrameSelection=y,exports.useHistoryRecords=h,exports.useMemoFn=gr;
