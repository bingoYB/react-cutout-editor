import e,{useRef as t,useState as n,useCallback as r,useEffect as o,useMemo as i,useDebugValue as a,createElement as s,useContext as c,createContext as l}from"react";import{Stage as u,Layer as d,Image as p,Shape as h}from"react-konva";import f from"konva";function g(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var m,y={exports:{}},v={};var w,b={};
/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */"production"===process.env.NODE_ENV?y.exports=function(){if(m)return v;m=1;var t=e,n=Symbol.for("react.element"),r=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,i=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function s(e,t,r){var s,c={},l=null,u=null;for(s in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,s)&&!a.hasOwnProperty(s)&&(c[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===c[s]&&(c[s]=t[s]);return{$$typeof:n,type:e,key:l,ref:u,props:c,_owner:i.current}}return v.Fragment=r,v.jsx=s,v.jsxs=s,v}():y.exports=(w||(w=1,"production"!==process.env.NODE_ENV&&function(){var t,n=e,r=Symbol.for("react.element"),o=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),l=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),p=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),g=Symbol.for("react.offscreen"),m=Symbol.iterator,y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function v(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];!function(e,t,n){var r=y.ReactDebugCurrentFrame.getStackAddendum();""!==r&&(t+="%s",n=n.concat([r]));var o=n.map((function(e){return String(e)}));o.unshift("Warning: "+t),Function.prototype.apply.call(console[e],console,o)}("error",e,n)}function w(e){return e.displayName||"Context"}function x(e){if(null==e)return null;if("number"==typeof e.tag&&v("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),"function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case i:return"Fragment";case o:return"Portal";case s:return"Profiler";case a:return"StrictMode";case d:return"Suspense";case p:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case l:return w(e)+".Consumer";case c:return w(e._context)+".Provider";case u:return function(e,t,n){var r=e.displayName;if(r)return r;var o=t.displayName||t.name||"";return""!==o?n+"("+o+")":n}(e,e.render,"ForwardRef");case h:var t=e.displayName||null;return null!==t?t:x(e.type)||"Memo";case f:var n=e,r=n._payload,g=n._init;try{return x(g(r))}catch(e){return null}}return null}t=Symbol.for("react.module.reference");var k,S,j,E,O,C,_,R=Object.assign,I=0;function P(){}P.__reactDisabledLog=!0;var D,L=y.ReactCurrentDispatcher;function N(e,t,n){if(void 0===D)try{throw Error()}catch(e){var r=e.stack.trim().match(/\n( *(at )?)/);D=r&&r[1]||""}return"\n"+D+e}var A,T=!1,M="function"==typeof WeakMap?WeakMap:Map;function $(e,t){if(!e||T)return"";var n,r=A.get(e);if(void 0!==r)return r;T=!0;var o,i=Error.prepareStackTrace;Error.prepareStackTrace=void 0,o=L.current,L.current=null,function(){if(0===I){k=console.log,S=console.info,j=console.warn,E=console.error,O=console.group,C=console.groupCollapsed,_=console.groupEnd;var e={configurable:!0,enumerable:!0,value:P,writable:!0};Object.defineProperties(console,{info:e,log:e,warn:e,error:e,group:e,groupCollapsed:e,groupEnd:e})}I++}();try{if(t){var a=function(){throw Error()};if(Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(a,[])}catch(e){n=e}Reflect.construct(e,[],a)}else{try{a.call()}catch(e){n=e}e.call(a.prototype)}}else{try{throw Error()}catch(e){n=e}e()}}catch(t){if(t&&n&&"string"==typeof t.stack){for(var s=t.stack.split("\n"),c=n.stack.split("\n"),l=s.length-1,u=c.length-1;l>=1&&u>=0&&s[l]!==c[u];)u--;for(;l>=1&&u>=0;l--,u--)if(s[l]!==c[u]){if(1!==l||1!==u)do{if(l--,--u<0||s[l]!==c[u]){var d="\n"+s[l].replace(" at new "," at ");return e.displayName&&d.includes("<anonymous>")&&(d=d.replace("<anonymous>",e.displayName)),"function"==typeof e&&A.set(e,d),d}}while(l>=1&&u>=0);break}}}finally{T=!1,L.current=o,function(){if(0==--I){var e={configurable:!0,enumerable:!0,writable:!0};Object.defineProperties(console,{log:R({},e,{value:k}),info:R({},e,{value:S}),warn:R({},e,{value:j}),error:R({},e,{value:E}),group:R({},e,{value:O}),groupCollapsed:R({},e,{value:C}),groupEnd:R({},e,{value:_})})}I<0&&v("disabledDepth fell below zero. This is a bug in React. Please file an issue.")}(),Error.prepareStackTrace=i}var p=e?e.displayName||e.name:"",h=p?N(p):"";return"function"==typeof e&&A.set(e,h),h}function F(e,t,n){if(null==e)return"";if("function"==typeof e)return $(e,!(!(r=e.prototype)||!r.isReactComponent));var r;if("string"==typeof e)return N(e);switch(e){case d:return N("Suspense");case p:return N("SuspenseList")}if("object"==typeof e)switch(e.$$typeof){case u:return $(e.render,!1);case h:return F(e.type,t,n);case f:var o=e,i=o._payload,a=o._init;try{return F(a(i),t,n)}catch(e){}}return""}A=new M;var z=Object.prototype.hasOwnProperty,W={},B=y.ReactDebugCurrentFrame;function V(e){if(e){var t=e._owner,n=F(e.type,e._source,t?t.type:null);B.setExtraStackFrame(n)}else B.setExtraStackFrame(null)}var U=Array.isArray;function Y(e){return U(e)}function H(e){return""+e}function G(e){if(function(e){try{return H(e),!1}catch(e){return!0}}(e))return v("The provided key is an unsupported type %s. This value must be coerced to a string before before using it here.",function(e){return"function"==typeof Symbol&&Symbol.toStringTag&&e[Symbol.toStringTag]||e.constructor.name||"Object"}(e)),H(e)}var X,q,K=y.ReactCurrentOwner,Z={key:!0,ref:!0,__self:!0,__source:!0};function J(e,t,n,o,i){var a,s={},c=null,l=null;for(a in void 0!==n&&(G(n),c=""+n),function(e){if(z.call(e,"key")){var t=Object.getOwnPropertyDescriptor(e,"key").get;if(t&&t.isReactWarning)return!1}return void 0!==e.key}(t)&&(G(t.key),c=""+t.key),function(e){if(z.call(e,"ref")){var t=Object.getOwnPropertyDescriptor(e,"ref").get;if(t&&t.isReactWarning)return!1}return void 0!==e.ref}(t)&&(l=t.ref,function(e){"string"==typeof e.ref&&K.current}(t)),t)z.call(t,a)&&!Z.hasOwnProperty(a)&&(s[a]=t[a]);if(e&&e.defaultProps){var u=e.defaultProps;for(a in u)void 0===s[a]&&(s[a]=u[a])}if(c||l){var d="function"==typeof e?e.displayName||e.name||"Unknown":e;c&&function(e,t){var n=function(){X||(X=!0,v("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"key",{get:n,configurable:!0})}(s,d),l&&function(e,t){var n=function(){q||(q=!0,v("%s: `ref` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://reactjs.org/link/special-props)",t))};n.isReactWarning=!0,Object.defineProperty(e,"ref",{get:n,configurable:!0})}(s,d)}return function(e,t,n,o,i,a,s){var c={$$typeof:r,type:e,key:t,ref:n,props:s,_owner:a,_store:{}};return Object.defineProperty(c._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:!1}),Object.defineProperty(c,"_self",{configurable:!1,enumerable:!1,writable:!1,value:o}),Object.defineProperty(c,"_source",{configurable:!1,enumerable:!1,writable:!1,value:i}),Object.freeze&&(Object.freeze(c.props),Object.freeze(c)),c}(e,c,l,i,o,K.current,s)}var Q,ee=y.ReactCurrentOwner,te=y.ReactDebugCurrentFrame;function ne(e){if(e){var t=e._owner,n=F(e.type,e._source,t?t.type:null);te.setExtraStackFrame(n)}else te.setExtraStackFrame(null)}function re(e){return"object"==typeof e&&null!==e&&e.$$typeof===r}function oe(){if(ee.current){var e=x(ee.current.type);if(e)return"\n\nCheck the render method of `"+e+"`."}return""}Q=!1;var ie={};function ae(e,t){if(e._store&&!e._store.validated&&null==e.key){e._store.validated=!0;var n=function(e){var t=oe();if(!t){var n="string"==typeof e?e:e.displayName||e.name;n&&(t="\n\nCheck the top-level render call using <"+n+">.")}return t}(t);if(!ie[n]){ie[n]=!0;var r="";e&&e._owner&&e._owner!==ee.current&&(r=" It was passed a child from "+x(e._owner.type)+"."),ne(e),v('Each child in a list should have a unique "key" prop.%s%s See https://reactjs.org/link/warning-keys for more information.',n,r),ne(null)}}}function se(e,t){if("object"==typeof e)if(Y(e))for(var n=0;n<e.length;n++){var r=e[n];re(r)&&ae(r,t)}else if(re(e))e._store&&(e._store.validated=!0);else if(e){var o=function(e){if(null===e||"object"!=typeof e)return null;var t=m&&e[m]||e["@@iterator"];return"function"==typeof t?t:null}(e);if("function"==typeof o&&o!==e.entries)for(var i,a=o.call(e);!(i=a.next()).done;)re(i.value)&&ae(i.value,t)}}function ce(e){var t,n=e.type;if(null!=n&&"string"!=typeof n){if("function"==typeof n)t=n.propTypes;else{if("object"!=typeof n||n.$$typeof!==u&&n.$$typeof!==h)return;t=n.propTypes}if(t){var r=x(n);!function(e,t,n,r,o){var i=Function.call.bind(z);for(var a in e)if(i(e,a)){var s=void 0;try{if("function"!=typeof e[a]){var c=Error((r||"React class")+": "+n+" type `"+a+"` is invalid; it must be a function, usually from the `prop-types` package, but received `"+typeof e[a]+"`.This often happens because of typos such as `PropTypes.function` instead of `PropTypes.func`.");throw c.name="Invariant Violation",c}s=e[a](t,a,r,n,null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(e){s=e}!s||s instanceof Error||(V(o),v("%s: type specification of %s `%s` is invalid; the type checker function must return `null` or an `Error` but returned a %s. You may have forgotten to pass an argument to the type checker creator (arrayOf, instanceOf, objectOf, oneOf, oneOfType, and shape all require an argument).",r||"React class",n,a,typeof s),V(null)),s instanceof Error&&!(s.message in W)&&(W[s.message]=!0,V(o),v("Failed %s type: %s",n,s.message),V(null))}}(t,e.props,"prop",r,e)}else void 0===n.PropTypes||Q||(Q=!0,v("Component %s declared `PropTypes` instead of `propTypes`. Did you misspell the property assignment?",x(n)||"Unknown"));"function"!=typeof n.getDefaultProps||n.getDefaultProps.isReactClassApproved||v("getDefaultProps is only used on classic React.createClass definitions. Use a static property named `defaultProps` instead.")}}var le={};function ue(e,n,o,m,y,w){var b=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===s||e===a||e===d||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===f||e.$$typeof===h||e.$$typeof===c||e.$$typeof===l||e.$$typeof===u||e.$$typeof===t||void 0!==e.getModuleId)}(e);if(!b){var k,S="";(void 0===e||"object"==typeof e&&null!==e&&0===Object.keys(e).length)&&(S+=" You likely forgot to export your component from the file it's defined in, or you might have mixed up default and named imports."),S+=oe(),null===e?k="null":Y(e)?k="array":void 0!==e&&e.$$typeof===r?(k="<"+(x(e.type)||"Unknown")+" />",S=" Did you accidentally export a JSX literal instead of a component?"):k=typeof e,v("React.jsx: type is invalid -- expected a string (for built-in components) or a class/function (for composite components) but got: %s.%s",k,S)}var j=J(e,n,o,y,w);if(null==j)return j;if(b){var E=n.children;if(void 0!==E)if(m)if(Y(E)){for(var O=0;O<E.length;O++)se(E[O],e);Object.freeze&&Object.freeze(E)}else v("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else se(E,e)}if(z.call(n,"key")){var C=x(e),_=Object.keys(n).filter((function(e){return"key"!==e})),R=_.length>0?"{key: someKey, "+_.join(": ..., ")+": ...}":"{key: someKey}";le[C+R]||(v('A props object containing a "key" prop is being spread into JSX:\n  let props = %s;\n  <%s {...props} />\nReact keys must be passed directly to JSX without using spread:\n  let props = %s;\n  <%s key={someKey} {...props} />',R,C,_.length>0?"{"+_.join(": ..., ")+": ...}":"{}",C),le[C+R]=!0)}return e===i?function(e){for(var t=Object.keys(e.props),n=0;n<t.length;n++){var r=t[n];if("children"!==r&&"key"!==r){ne(e),v("Invalid prop `%s` supplied to `React.Fragment`. React.Fragment can only have `key` and `children` props.",r),ne(null);break}}null!==e.ref&&(ne(e),v("Invalid attribute `ref` supplied to `React.Fragment`."),ne(null))}(j):ce(j),j}var de=function(e,t,n){return ue(e,t,n,!1)},pe=function(e,t,n){return ue(e,t,n,!0)};b.Fragment=i,b.jsx=de,b.jsxs=pe}()),b);var x,k,S=y.exports;!function(e){e.View="view",e.DrawLine="drawLine",e.Erase="erase",e.FrameSelect="select"}(x||(x={})),function(e){e.DrawLine="drawLine",e.Reverse="reverse",e.AddSelect="select",e.AddMaskImage="addMaskImage"}(k||(k={}));const j=e=>e===x.Erase||e===x.DrawLine;function E(e){const[t,a]=n((()=>({records:e||[],currentIndex:(null==e?void 0:e.length)?e.length-1:-1}))),s=r((e=>{a((t=>{const n=t.records.slice(0,t.currentIndex+1);return n.push(e),{records:n,currentIndex:t.currentIndex+1}}))}),[]),c=r((()=>(a((e=>e.currentIndex>=0?Object.assign(Object.assign({},e),{currentIndex:e.currentIndex-1}):e)),t.records[t.currentIndex-1])),[]),l=r((()=>(a((e=>e.currentIndex<e.records.length-1?Object.assign(Object.assign({},e),{currentIndex:e.currentIndex+1}):e)),t.records[t.currentIndex+1])),[]),u=r((()=>{a({records:[],currentIndex:-1})}),[]),d=r((e=>{e.ctrlKey&&"z"===e.key?(e.preventDefault(),c()):e.ctrlKey&&"y"===e.key&&(e.preventDefault(),l())}),[c,l]);o((()=>(window.addEventListener("keydown",d),()=>{window.removeEventListener("keydown",d)})),[d]);const p=i((()=>t.records.slice(0,t.currentIndex+1)),[t]);return i((()=>({currentIndex:t.currentIndex,state:t.records[t.currentIndex],records:p,push:s,undo:c,redo:l,canUndo:t.currentIndex>=0,canRedo:t.currentIndex<t.records.length-1,clear:u,all:t.records})),[t,p,s,c,l,u])}function O(e,t,n){return.299*e+.587*t+.114*n>50}function C(e,t){const[n,r,o]=e,[i,a,s]=t;return Math.abs(n-i)<5&&Math.abs(r-a)<5&&Math.abs(o-s)<5}function _(e){if(!e)return;const t=e.getContext("2d",{willReadFrequently:!0});if(!t)return e;const n=t.getImageData(0,0,e.width,e.height).data;let r=e.width,o=e.height,i=0,a=0;for(let t=0;t<e.height;t++)for(let s=0;s<e.width;s++){n[4*(t*e.width+s)+3]>0&&(r=Math.min(r,s),o=Math.min(o,t),i=Math.max(i,s),a=Math.max(a,t))}if(r>i||o>a)return e;const s=document.createElement("canvas"),c=i-r+1,l=a-o+1;s.width=c,s.height=l;const u=s.getContext("2d");return u?(u.drawImage(e,r,o,c,l,0,0,c,l),s):e}const R=({onSelected:e,showBorderAfterDrag:a=!1,borderClassName:s,borderStyle:c})=>{const[l,u]=n({left:0,top:0,width:0,height:0,display:"none"}),d=t({x:0,y:0}),p=t();function h(e,t,n){return Math.min(Math.max(e,t),n)}const f=r((t=>{const n={x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY},r=t.currentTarget.getBoundingClientRect();d.current={x:n.x,y:n.y};let o=!0;function i(e){if(!o)return;const t={x:h(e.clientX-r.x,0,r.width),y:h(e.clientY-r.y,0,r.height)},n=Math.min(d.current.x,t.x),i=Math.min(d.current.y,t.y),a=Math.abs(t.x-d.current.x),s=Math.abs(t.y-d.current.y);u({left:n,top:i,width:a,height:s,display:"block"})}function s(t){if(window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s),!o)return;o=!1;const n={x:h(t.clientX-r.x,0,r.width),y:h(t.clientY-r.y,0,r.height)};d.current.x===n.x&&d.current.y===n.y||null==e||e(d.current,n),u(a?e=>Object.assign(Object.assign({},e),{display:"block"}):e=>Object.assign(Object.assign({},e),{display:"none"}))}window.addEventListener("mousemove",i),window.addEventListener("mouseup",s),p.current=()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",s)}}),[e,a]),g=i((()=>S.jsx("div",{className:s,style:Object.assign(Object.assign({position:"absolute",border:"2px solid #1890ff",backgroundColor:"rgba(24, 144, 255, 0.1)",pointerEvents:"none",zIndex:999},c),l)})),[s,l,c]);return o((()=>()=>{var e;null===(e=p.current)||void 0===e||e.call(p)}),[]),{onMouseDown:f,SelectionBorder:g}};var I=e,P=g((function(e,t,n){const r=I.useRef("loading"),o=I.useRef(),[i,a]=I.useState(0),s=I.useRef(),c=I.useRef(),l=I.useRef();return s.current===e&&c.current===t&&l.current===n||(r.current="loading",o.current=void 0,s.current=e,c.current=t,l.current=n),I.useLayoutEffect((function(){if(e){var i=document.createElement("img");return i.addEventListener("load",s),i.addEventListener("error",c),t&&(i.crossOrigin=t),n&&(i.referrerPolicy=n),i.src=e,function(){i.removeEventListener("load",s),i.removeEventListener("error",c)}}function s(){r.current="loaded",o.current=i,a(Math.random())}function c(){r.current="failed",o.current=void 0,a(Math.random())}}),[e,t,n]),[o.current,r.current]}));function D(){const[e,t]=n({x:0,y:0});return{handleDragStart:n=>{const r=n.clientX-e.x,o=n.clientY-e.y,i=e=>{t({x:e.clientX-r,y:e.clientY-o})},a=()=>{document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",a)};document.addEventListener("mousemove",i),document.addEventListener("mouseup",a)},style:i((()=>({transform:`translate(${e.x}px, ${e.y}px)`})),[e])}}var L=function(){return L=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},L.apply(this,arguments)};function N(e,t,n){if(n||2===arguments.length)for(var r,o=0,i=t.length;o<i;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))}function A(e){var t=Object.create(null);return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}"function"==typeof SuppressedError&&SuppressedError;var T=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,M=A((function(e){return T.test(e)||111===e.charCodeAt(0)&&110===e.charCodeAt(1)&&e.charCodeAt(2)<91})),$="-ms-",F="-moz-",z="-webkit-",W="comm",B="rule",V="decl",U="@keyframes",Y=Math.abs,H=String.fromCharCode,G=Object.assign;function X(e){return e.trim()}function q(e,t){return(e=t.exec(e))?e[0]:e}function K(e,t,n){return e.replace(t,n)}function Z(e,t,n){return e.indexOf(t,n)}function J(e,t){return 0|e.charCodeAt(t)}function Q(e,t,n){return e.slice(t,n)}function ee(e){return e.length}function te(e){return e.length}function ne(e,t){return t.push(e),e}function re(e,t){return e.filter((function(e){return!q(e,t)}))}var oe=1,ie=1,ae=0,se=0,ce=0,le="";function ue(e,t,n,r,o,i,a,s){return{value:e,root:t,parent:n,type:r,props:o,children:i,line:oe,column:ie,length:a,return:"",siblings:s}}function de(e,t){return G(ue("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function pe(e){for(;e.root;)e=de(e.root,{children:[e]});ne(e,e.siblings)}function he(){return ce=se>0?J(le,--se):0,ie--,10===ce&&(ie=1,oe--),ce}function fe(){return ce=se<ae?J(le,se++):0,ie++,10===ce&&(ie=1,oe++),ce}function ge(){return J(le,se)}function me(){return se}function ye(e,t){return Q(le,e,t)}function ve(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function we(e){return X(ye(se-1,ke(91===e?e+2:40===e?e+1:e)))}function be(e){for(;(ce=ge())&&ce<33;)fe();return ve(e)>2||ve(ce)>3?"":" "}function xe(e,t){for(;--t&&fe()&&!(ce<48||ce>102||ce>57&&ce<65||ce>70&&ce<97););return ye(e,me()+(t<6&&32==ge()&&32==fe()))}function ke(e){for(;fe();)switch(ce){case e:return se;case 34:case 39:34!==e&&39!==e&&ke(ce);break;case 40:41===e&&ke(e);break;case 92:fe()}return se}function Se(e,t){for(;fe()&&e+ce!==57&&(e+ce!==84||47!==ge()););return"/*"+ye(t,se-1)+"*"+H(47===e?e:fe())}function je(e){for(;!ve(ge());)fe();return ye(e,se)}function Ee(e){return function(e){return le="",e}(Oe("",null,null,null,[""],e=function(e){return oe=ie=1,ae=ee(le=e),se=0,[]}(e),0,[0],e))}function Oe(e,t,n,r,o,i,a,s,c){for(var l=0,u=0,d=a,p=0,h=0,f=0,g=1,m=1,y=1,v=0,w="",b=o,x=i,k=r,S=w;m;)switch(f=v,v=fe()){case 40:if(108!=f&&58==J(S,d-1)){-1!=Z(S+=K(we(v),"&","&\f"),"&\f",Y(l?s[l-1]:0))&&(y=-1);break}case 34:case 39:case 91:S+=we(v);break;case 9:case 10:case 13:case 32:S+=be(f);break;case 92:S+=xe(me()-1,7);continue;case 47:switch(ge()){case 42:case 47:ne(_e(Se(fe(),me()),t,n,c),c);break;default:S+="/"}break;case 123*g:s[l++]=ee(S)*y;case 125*g:case 59:case 0:switch(v){case 0:case 125:m=0;case 59+u:-1==y&&(S=K(S,/\f/g,"")),h>0&&ee(S)-d&&ne(h>32?Re(S+";",r,n,d-1,c):Re(K(S," ","")+";",r,n,d-2,c),c);break;case 59:S+=";";default:if(ne(k=Ce(S,t,n,l,u,o,s,w,b=[],x=[],d,i),i),123===v)if(0===u)Oe(S,t,k,k,b,i,d,s,x);else switch(99===p&&110===J(S,3)?100:p){case 100:case 108:case 109:case 115:Oe(e,k,k,r&&ne(Ce(e,k,k,0,0,o,s,w,o,b=[],d,x),x),o,x,d,s,r?b:x);break;default:Oe(S,k,k,k,[""],x,0,s,x)}}l=u=h=0,g=y=1,w=S="",d=a;break;case 58:d=1+ee(S),h=f;default:if(g<1)if(123==v)--g;else if(125==v&&0==g++&&125==he())continue;switch(S+=H(v),v*g){case 38:y=u>0?1:(S+="\f",-1);break;case 44:s[l++]=(ee(S)-1)*y,y=1;break;case 64:45===ge()&&(S+=we(fe())),p=ge(),u=d=ee(w=S+=je(me())),v++;break;case 45:45===f&&2==ee(S)&&(g=0)}}return i}function Ce(e,t,n,r,o,i,a,s,c,l,u,d){for(var p=o-1,h=0===o?i:[""],f=te(h),g=0,m=0,y=0;g<r;++g)for(var v=0,w=Q(e,p+1,p=Y(m=a[g])),b=e;v<f;++v)(b=X(m>0?h[v]+" "+w:K(w,/&\f/g,h[v])))&&(c[y++]=b);return ue(e,t,n,0===o?B:s,c,l,u,d)}function _e(e,t,n,r){return ue(e,t,n,W,H(ce),Q(e,2,-2),0,r)}function Re(e,t,n,r,o){return ue(e,t,n,V,Q(e,0,r),Q(e,r+1,-1),r,o)}function Ie(e,t,n){switch(function(e,t){return 45^J(e,0)?(((t<<2^J(e,0))<<2^J(e,1))<<2^J(e,2))<<2^J(e,3):0}(e,t)){case 5103:return z+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return z+e+e;case 4789:return F+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return z+e+F+e+$+e+e;case 5936:switch(J(e,t+11)){case 114:return z+e+$+K(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return z+e+$+K(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return z+e+$+K(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return z+e+$+e+e;case 6165:return z+e+$+"flex-"+e+e;case 5187:return z+e+K(e,/(\w+).+(:[^]+)/,z+"box-$1$2"+$+"flex-$1$2")+e;case 5443:return z+e+$+"flex-item-"+K(e,/flex-|-self/g,"")+(q(e,/flex-|baseline/)?"":$+"grid-row-"+K(e,/flex-|-self/g,""))+e;case 4675:return z+e+$+"flex-line-pack"+K(e,/align-content|flex-|-self/g,"")+e;case 5548:return z+e+$+K(e,"shrink","negative")+e;case 5292:return z+e+$+K(e,"basis","preferred-size")+e;case 6060:return z+"box-"+K(e,"-grow","")+z+e+$+K(e,"grow","positive")+e;case 4554:return z+K(e,/([^-])(transform)/g,"$1"+z+"$2")+e;case 6187:return K(K(K(e,/(zoom-|grab)/,z+"$1"),/(image-set)/,z+"$1"),e,"")+e;case 5495:case 3959:return K(e,/(image-set\([^]*)/,z+"$1$`$1");case 4968:return K(K(e,/(.+:)(flex-)?(.*)/,z+"box-pack:$3"+$+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+z+e+e;case 4200:if(!q(e,/flex-|baseline/))return $+"grid-column-align"+Q(e,t)+e;break;case 2592:case 3360:return $+K(e,"template-","")+e;case 4384:case 3616:return n&&n.some((function(e,n){return t=n,q(e.props,/grid-\w+-end/)}))?~Z(e+(n=n[t].value),"span",0)?e:$+K(e,"-start","")+e+$+"grid-row-span:"+(~Z(n,"span",0)?q(n,/\d+/):+q(n,/\d+/)-+q(e,/\d+/))+";":$+K(e,"-start","")+e;case 4896:case 4128:return n&&n.some((function(e){return q(e.props,/grid-\w+-start/)}))?e:$+K(K(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return K(e,/(.+)-inline(.+)/,z+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(ee(e)-1-t>6)switch(J(e,t+1)){case 109:if(45!==J(e,t+4))break;case 102:return K(e,/(.+:)(.+)-([^]+)/,"$1"+z+"$2-$3$1"+F+(108==J(e,t+3)?"$3":"$2-$3"))+e;case 115:return~Z(e,"stretch",0)?Ie(K(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return K(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,(function(t,n,r,o,i,a,s){return $+n+":"+r+s+(o?$+n+"-span:"+(i?a:+a-+r)+s:"")+e}));case 4949:if(121===J(e,t+6))return K(e,":",":"+z)+e;break;case 6444:switch(J(e,45===J(e,14)?18:11)){case 120:return K(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+z+(45===J(e,14)?"inline-":"")+"box$3$1"+z+"$2$3$1"+$+"$2box$3")+e;case 100:return K(e,":",":"+$)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return K(e,"scroll-","scroll-snap-")+e}return e}function Pe(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function De(e,t,n,r){switch(e.type){case"@layer":if(e.children.length)break;case"@import":case V:return e.return=e.return||e.value;case W:return"";case U:return e.return=e.value+"{"+Pe(e.children,r)+"}";case B:if(!ee(e.value=e.props.join(",")))return""}return ee(n=Pe(e.children,r))?e.return=e.value+"{"+n+"}":""}function Le(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case V:return void(e.return=Ie(e.value,e.length,n));case U:return Pe([de(e,{value:K(e.value,"@","@"+z)})],r);case B:if(e.length)return function(e,t){return e.map(t).join("")}(n=e.props,(function(t){switch(q(t,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":pe(de(e,{props:[K(t,/:(read-\w+)/,":-moz-$1")]})),pe(de(e,{props:[t]})),G(e,{props:re(n,r)});break;case"::placeholder":pe(de(e,{props:[K(t,/:(plac\w+)/,":"+z+"input-$1")]})),pe(de(e,{props:[K(t,/:(plac\w+)/,":-moz-$1")]})),pe(de(e,{props:[K(t,/:(plac\w+)/,$+"input-$1")]})),pe(de(e,{props:[t]})),G(e,{props:re(n,r)})}return""}))}}var Ne={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Ae="undefined"!=typeof process&&void 0!==process.env&&(process.env.REACT_APP_SC_ATTR||process.env.SC_ATTR)||"data-styled",Te="active",Me="data-styled-version",$e="6.1.16",Fe="/*!sc*/\n",ze="undefined"!=typeof window&&"HTMLElement"in window,We=Boolean("boolean"==typeof SC_DISABLE_SPEEDY?SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&""!==process.env.REACT_APP_SC_DISABLE_SPEEDY?"false"!==process.env.REACT_APP_SC_DISABLE_SPEEDY&&process.env.REACT_APP_SC_DISABLE_SPEEDY:"undefined"!=typeof process&&void 0!==process.env&&void 0!==process.env.SC_DISABLE_SPEEDY&&""!==process.env.SC_DISABLE_SPEEDY?"false"!==process.env.SC_DISABLE_SPEEDY&&process.env.SC_DISABLE_SPEEDY:"production"!==process.env.NODE_ENV),Be=/invalid hook call/i,Ve=new Set,Ue=function(e,n){if("production"!==process.env.NODE_ENV){var r=n?' with the id of "'.concat(n,'"'):"",o="The component ".concat(e).concat(r," has been created dynamically.\n")+"You may see this warning because you've called styled inside another component.\nTo resolve this only create new StyledComponents outside of any render method and function component.",i=console.error;try{var a=!0;console.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];Be.test(e)?(a=!1,Ve.delete(o)):i.apply(void 0,N([e],t,!1))},t(),a&&!Ve.has(o)&&(console.warn(o),Ve.add(o))}catch(e){Be.test(e.message)&&Ve.delete(o)}finally{console.error=i}}},Ye=Object.freeze([]),He=Object.freeze({});var Ge=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),Xe=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,qe=/(^-|-$)/g;function Ke(e){return e.replace(Xe,"-").replace(qe,"")}var Ze=/(a)(d)/gi,Je=function(e){return String.fromCharCode(e+(e>25?39:97))};function Qe(e){var t,n="";for(t=Math.abs(e);t>52;t=t/52|0)n=Je(t%52)+n;return(Je(t%52)+n).replace(Ze,"$1-$2")}var et,tt=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},nt=function(e){return tt(5381,e)};function rt(e){return"production"!==process.env.NODE_ENV&&"string"==typeof e&&e||e.displayName||e.name||"Component"}function ot(e){return"string"==typeof e&&("production"===process.env.NODE_ENV||e.charAt(0)===e.charAt(0).toLowerCase())}var it="function"==typeof Symbol&&Symbol.for,at=it?Symbol.for("react.memo"):60115,st=it?Symbol.for("react.forward_ref"):60112,ct={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},lt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},ut={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},dt=((et={})[st]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},et[at]=ut,et);function pt(e){return("type"in(t=e)&&t.type.$$typeof)===at?ut:"$$typeof"in e?dt[e.$$typeof]:ct;var t}var ht=Object.defineProperty,ft=Object.getOwnPropertyNames,gt=Object.getOwnPropertySymbols,mt=Object.getOwnPropertyDescriptor,yt=Object.getPrototypeOf,vt=Object.prototype;function wt(e,t,n){if("string"!=typeof t){if(vt){var r=yt(t);r&&r!==vt&&wt(e,r,n)}var o=ft(t);gt&&(o=o.concat(gt(t)));for(var i=pt(e),a=pt(t),s=0;s<o.length;++s){var c=o[s];if(!(c in lt||n&&n[c]||a&&c in a||i&&c in i)){var l=mt(t,c);try{ht(e,c,l)}catch(e){}}}}return e}function bt(e){return"function"==typeof e}function xt(e){return"object"==typeof e&&"styledComponentId"in e}function kt(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function St(e,t){if(0===e.length)return"";for(var n=e[0],r=1;r<e.length;r++)n+=e[r];return n}function jt(e){return null!==e&&"object"==typeof e&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function Et(e,t,n){if(void 0===n&&(n=!1),!n&&!jt(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=Et(e[r],t[r]);else if(jt(t))for(var r in t)e[r]=Et(e[r],t[r]);return e}function Ot(e,t){Object.defineProperty(e,"toString",{value:t})}var Ct="production"!==process.env.NODE_ENV?{1:"Cannot create styled-component for component: %s.\n\n",2:"Can't collect styles once you've consumed a `ServerStyleSheet`'s styles! `ServerStyleSheet` is a one off instance for each server-side render cycle.\n\n- Are you trying to reuse it across renders?\n- Are you accidentally calling collectStyles twice?\n\n",3:"Streaming SSR is only supported in a Node.js environment; Please do not try to call this method in the browser.\n\n",4:"The `StyleSheetManager` expects a valid target or sheet prop!\n\n- Does this error occur on the client and is your target falsy?\n- Does this error occur on the server and is the sheet falsy?\n\n",5:"The clone method cannot be used on the client!\n\n- Are you running in a client-like environment on the server?\n- Are you trying to run SSR on the client?\n\n",6:"Trying to insert a new style tag, but the given Node is unmounted!\n\n- Are you using a custom target that isn't mounted?\n- Does your document not have a valid head element?\n- Have you accidentally removed a style tag manually?\n\n",7:'ThemeProvider: Please return an object from your "theme" prop function, e.g.\n\n```js\ntheme={() => ({})}\n```\n\n',8:'ThemeProvider: Please make your "theme" prop an object.\n\n',9:"Missing document `<head>`\n\n",10:"Cannot find a StyleSheet instance. Usually this happens if there are multiple copies of styled-components loaded at once. Check out this issue for how to troubleshoot and fix the common cases where this situation can happen: https://github.com/styled-components/styled-components/issues/1941#issuecomment-417862021\n\n",11:"_This error was replaced with a dev-time warning, it will be deleted for v4 final._ [createGlobalStyle] received children which will not be rendered. Please use the component without passing children elements.\n\n",12:"It seems you are interpolating a keyframe declaration (%s) into an untagged string. This was supported in styled-components v3, but is not longer supported in v4 as keyframes are now injected on-demand. Please wrap your string in the css\\`\\` helper which ensures the styles are injected correctly. See https://www.styled-components.com/docs/api#css\n\n",13:"%s is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.\n\n",14:'ThemeProvider: "theme" prop is required.\n\n',15:"A stylis plugin has been supplied that is not named. We need a name for each plugin to be able to prevent styling collisions between different stylis configurations within the same app. Before you pass your plugin to `<StyleSheetManager stylisPlugins={[]}>`, please make sure each plugin is uniquely-named, e.g.\n\n```js\nObject.defineProperty(importedPlugin, 'name', { value: 'some-unique-name' });\n```\n\n",16:"Reached the limit of how many styled components may be created at group %s.\nYou may only create up to 1,073,741,824 components. If you're creating components dynamically,\nas for instance in your render method then you may be running into this limitation.\n\n",17:"CSSStyleSheet could not be found on HTMLStyleElement.\nHas styled-components' style tag been unmounted or altered by another script?\n",18:"ThemeProvider: Please make sure your useTheme hook is within a `<ThemeProvider>`"}:{};function _t(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e[0],r=[],o=1,i=e.length;o<i;o+=1)r.push(e[o]);return r.forEach((function(e){n=n.replace(/%[a-z]/,e)})),n}function Rt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return"production"===process.env.NODE_ENV?new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):"")):new Error(_t.apply(void 0,N([Ct[e]],t,!1)).trim())}var It=function(){function e(e){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=e}return e.prototype.indexOfGroup=function(e){for(var t=0,n=0;n<e;n++)t+=this.groupSizes[n];return t},e.prototype.insertRules=function(e,t){if(e>=this.groupSizes.length){for(var n=this.groupSizes,r=n.length,o=r;e>=o;)if((o<<=1)<0)throw Rt(16,"".concat(e));this.groupSizes=new Uint32Array(o),this.groupSizes.set(n),this.length=o;for(var i=r;i<o;i++)this.groupSizes[i]=0}for(var a=this.indexOfGroup(e+1),s=(i=0,t.length);i<s;i++)this.tag.insertRule(a,t[i])&&(this.groupSizes[e]++,a++)},e.prototype.clearGroup=function(e){if(e<this.length){var t=this.groupSizes[e],n=this.indexOfGroup(e),r=n+t;this.groupSizes[e]=0;for(var o=n;o<r;o++)this.tag.deleteRule(n)}},e.prototype.getGroup=function(e){var t="";if(e>=this.length||0===this.groupSizes[e])return t;for(var n=this.groupSizes[e],r=this.indexOfGroup(e),o=r+n,i=r;i<o;i++)t+="".concat(this.tag.getRule(i)).concat(Fe);return t},e}(),Pt=1<<30,Dt=new Map,Lt=new Map,Nt=1,At=function(e){if(Dt.has(e))return Dt.get(e);for(;Lt.has(Nt);)Nt++;var t=Nt++;if("production"!==process.env.NODE_ENV&&((0|t)<0||t>Pt))throw Rt(16,"".concat(t));return Dt.set(e,t),Lt.set(t,e),t},Tt=function(e,t){Nt=t+1,Dt.set(e,t),Lt.set(t,e)},Mt="style[".concat(Ae,"][").concat(Me,'="').concat($e,'"]'),$t=new RegExp("^".concat(Ae,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ft=function(e,t,n){for(var r,o=n.split(","),i=0,a=o.length;i<a;i++)(r=o[i])&&e.registerName(t,r)},zt=function(e,t){for(var n,r=(null!==(n=t.textContent)&&void 0!==n?n:"").split(Fe),o=[],i=0,a=r.length;i<a;i++){var s=r[i].trim();if(s){var c=s.match($t);if(c){var l=0|parseInt(c[1],10),u=c[2];0!==l&&(Tt(u,l),Ft(e,u,c[3]),e.getTag().insertRules(l,o)),o.length=0}else o.push(s)}}},Wt=function(e){for(var t=document.querySelectorAll(Mt),n=0,r=t.length;n<r;n++){var o=t[n];o&&o.getAttribute(Ae)!==Te&&(zt(e,o),o.parentNode&&o.parentNode.removeChild(o))}};var Bt=function(e){var t=document.head,n=e||t,r=document.createElement("style"),o=function(e){var t=Array.from(e.querySelectorAll("style[".concat(Ae,"]")));return t[t.length-1]}(n),i=void 0!==o?o.nextSibling:null;r.setAttribute(Ae,Te),r.setAttribute(Me,$e);var a="undefined"!=typeof __webpack_nonce__?__webpack_nonce__:null;return a&&r.setAttribute("nonce",a),n.insertBefore(r,i),r},Vt=function(){function e(e){this.element=Bt(e),this.element.appendChild(document.createTextNode("")),this.sheet=function(e){if(e.sheet)return e.sheet;for(var t=document.styleSheets,n=0,r=t.length;n<r;n++){var o=t[n];if(o.ownerNode===e)return o}throw Rt(17)}(this.element),this.length=0}return e.prototype.insertRule=function(e,t){try{return this.sheet.insertRule(t,e),this.length++,!0}catch(e){return!1}},e.prototype.deleteRule=function(e){this.sheet.deleteRule(e),this.length--},e.prototype.getRule=function(e){var t=this.sheet.cssRules[e];return t&&t.cssText?t.cssText:""},e}(),Ut=function(){function e(e){this.element=Bt(e),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(e,t){if(e<=this.length&&e>=0){var n=document.createTextNode(t);return this.element.insertBefore(n,this.nodes[e]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(e){this.element.removeChild(this.nodes[e]),this.length--},e.prototype.getRule=function(e){return e<this.length?this.nodes[e].textContent:""},e}(),Yt=function(){function e(e){this.rules=[],this.length=0}return e.prototype.insertRule=function(e,t){return e<=this.length&&(this.rules.splice(e,0,t),this.length++,!0)},e.prototype.deleteRule=function(e){this.rules.splice(e,1),this.length--},e.prototype.getRule=function(e){return e<this.length?this.rules[e]:""},e}(),Ht=ze,Gt={isServer:!ze,useCSSOMInjection:!We},Xt=function(){function e(e,t,n){void 0===e&&(e=He),void 0===t&&(t={});var r=this;this.options=L(L({},Gt),e),this.gs=t,this.names=new Map(n),this.server=!!e.isServer,!this.server&&ze&&Ht&&(Ht=!1,Wt(this)),Ot(this,(function(){return function(e){for(var t=e.getTag(),n=t.length,r="",o=function(n){var o=function(e){return Lt.get(e)}(n);if(void 0===o)return"continue";var i=e.names.get(o),a=t.getGroup(n);if(void 0===i||!i.size||0===a.length)return"continue";var s="".concat(Ae,".g").concat(n,'[id="').concat(o,'"]'),c="";void 0!==i&&i.forEach((function(e){e.length>0&&(c+="".concat(e,","))})),r+="".concat(a).concat(s,'{content:"').concat(c,'"}').concat(Fe)},i=0;i<n;i++)o(i);return r}(r)}))}return e.registerId=function(e){return At(e)},e.prototype.rehydrate=function(){!this.server&&ze&&Wt(this)},e.prototype.reconstructWithOptions=function(t,n){return void 0===n&&(n=!0),new e(L(L({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(e){return this.gs[e]=(this.gs[e]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(e=function(e){var t=e.useCSSOMInjection,n=e.target;return e.isServer?new Yt(n):t?new Vt(n):new Ut(n)}(this.options),new It(e)));var e},e.prototype.hasNameForId=function(e,t){return this.names.has(e)&&this.names.get(e).has(t)},e.prototype.registerName=function(e,t){if(At(e),this.names.has(e))this.names.get(e).add(t);else{var n=new Set;n.add(t),this.names.set(e,n)}},e.prototype.insertRules=function(e,t,n){this.registerName(e,t),this.getTag().insertRules(At(e),n)},e.prototype.clearNames=function(e){this.names.has(e)&&this.names.get(e).clear()},e.prototype.clearRules=function(e){this.getTag().clearGroup(At(e)),this.clearNames(e)},e.prototype.clearTag=function(){this.tag=void 0},e}(),qt=/&/g,Kt=/^\s*\/\/.*$/gm;function Zt(e,t){return e.map((function(e){return"rule"===e.type&&(e.value="".concat(t," ").concat(e.value),e.value=e.value.replaceAll(",",",".concat(t," ")),e.props=e.props.map((function(e){return"".concat(t," ").concat(e)}))),Array.isArray(e.children)&&"@keyframes"!==e.type&&(e.children=Zt(e.children,t)),e}))}var Jt=new Xt,Qt=function(){var e,t,n,r=He,o=r.options,i=void 0===o?He:o,a=r.plugins,s=void 0===a?Ye:a,c=function(n,r,o){return o.startsWith(t)&&o.endsWith(t)&&o.replaceAll(t,"").length>0?".".concat(e):n},l=s.slice();l.push((function(e){e.type===B&&e.value.includes("&")&&(e.props[0]=e.props[0].replace(qt,t).replace(n,c))})),i.prefix&&l.push(Le),l.push(De);var u=function(r,o,a,s){void 0===o&&(o=""),void 0===a&&(a=""),void 0===s&&(s="&"),e=s,t=o,n=new RegExp("\\".concat(t,"\\b"),"g");var c=r.replace(Kt,""),u=Ee(a||o?"".concat(a," ").concat(o," { ").concat(c," }"):c);i.namespace&&(u=Zt(u,i.namespace));var d,p=[];return Pe(u,function(e){var t=te(e);return function(n,r,o,i){for(var a="",s=0;s<t;s++)a+=e[s](n,r,o,i)||"";return a}}(l.concat((d=function(e){return p.push(e)},function(e){e.root||(e=e.return)&&d(e)})))),p};return u.hash=s.length?s.reduce((function(e,t){return t.name||Rt(15),tt(e,t.name)}),5381).toString():"",u}(),en=e.createContext({shouldForwardProp:void 0,styleSheet:Jt,stylis:Qt});function tn(){return c(en)}en.Consumer,e.createContext(void 0);var nn=function(){function e(e,t){var n=this;this.inject=function(e,t){void 0===t&&(t=Qt);var r=n.name+t.hash;e.hasNameForId(n.id,r)||e.insertRules(n.id,r,t(n.rules,r,"@keyframes"))},this.name=e,this.id="sc-keyframes-".concat(e),this.rules=t,Ot(this,(function(){throw Rt(12,String(n.name))}))}return e.prototype.getName=function(e){return void 0===e&&(e=Qt),this.name+e.hash},e}(),rn=function(e){return e>="A"&&e<="Z"};function on(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(1===n&&"-"===r&&"-"===e[0])return e;rn(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var an=function(e){return null==e||!1===e||""===e},sn=function(e){var t,n,r=[];for(var o in e){var i=e[o];e.hasOwnProperty(o)&&!an(i)&&(Array.isArray(i)&&i.isCss||bt(i)?r.push("".concat(on(o),":"),i,";"):jt(i)?r.push.apply(r,N(N(["".concat(o," {")],sn(i),!1),["}"],!1)):r.push("".concat(on(o),": ").concat((t=o,null==(n=i)||"boolean"==typeof n||""===n?"":"number"!=typeof n||0===n||t in Ne||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function cn(e,t,n,r){if(an(e))return[];if(xt(e))return[".".concat(e.styledComponentId)];if(bt(e)){if(!bt(i=e)||i.prototype&&i.prototype.isReactComponent||!t)return[e];var o=e(t);return"production"===process.env.NODE_ENV||"object"!=typeof o||Array.isArray(o)||o instanceof nn||jt(o)||null===o||console.error("".concat(rt(e)," is not a styled component and cannot be referred to via component selector. See https://www.styled-components.com/docs/advanced#referring-to-other-components for more details.")),cn(o,t,n,r)}var i;return e instanceof nn?n?(e.inject(n,r),[e.getName(r)]):[e]:jt(e)?sn(e):Array.isArray(e)?Array.prototype.concat.apply(Ye,e.map((function(e){return cn(e,t,n,r)}))):[e.toString()]}var ln=nt($e),un=function(){function e(e,t,n){this.rules=e,this.staticRulesId="",this.isStatic="production"===process.env.NODE_ENV&&(void 0===n||n.isStatic)&&function(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(bt(n)&&!xt(n))return!1}return!0}(e),this.componentId=t,this.baseHash=tt(ln,t),this.baseStyle=n,Xt.registerId(t)}return e.prototype.generateAndInjectStyles=function(e,t,n){var r=this.baseStyle?this.baseStyle.generateAndInjectStyles(e,t,n):"";if(this.isStatic&&!n.hash)if(this.staticRulesId&&t.hasNameForId(this.componentId,this.staticRulesId))r=kt(r,this.staticRulesId);else{var o=St(cn(this.rules,e,t,n)),i=Qe(tt(this.baseHash,o)>>>0);if(!t.hasNameForId(this.componentId,i)){var a=n(o,".".concat(i),void 0,this.componentId);t.insertRules(this.componentId,i,a)}r=kt(r,i),this.staticRulesId=i}else{for(var s=tt(this.baseHash,n.hash),c="",l=0;l<this.rules.length;l++){var u=this.rules[l];if("string"==typeof u)c+=u,"production"!==process.env.NODE_ENV&&(s=tt(s,u));else if(u){var d=St(cn(u,e,t,n));s=tt(s,d+l),c+=d}}if(c){var p=Qe(s>>>0);t.hasNameForId(this.componentId,p)||t.insertRules(this.componentId,p,n(c,".".concat(p),void 0,this.componentId)),r=kt(r,p)}}return r},e}(),dn=e.createContext(void 0);dn.Consumer;var pn={},hn=new Set;function fn(t,n,r){var o=xt(t),i=t,c=!ot(t),l=n.attrs,u=void 0===l?Ye:l,d=n.componentId,p=void 0===d?function(e,t){var n="string"!=typeof e?"sc":Ke(e);pn[n]=(pn[n]||0)+1;var r="".concat(n,"-").concat(function(e){return Qe(nt(e)>>>0)}($e+n+pn[n]));return t?"".concat(t,"-").concat(r):r}(n.displayName,n.parentComponentId):d,h=n.displayName,f=void 0===h?function(e){return ot(e)?"styled.".concat(e):"Styled(".concat(rt(e),")")}(t):h,g=n.displayName&&n.componentId?"".concat(Ke(n.displayName),"-").concat(n.componentId):n.componentId||p,m=o&&i.attrs?i.attrs.concat(u).filter(Boolean):u,y=n.shouldForwardProp;if(o&&i.shouldForwardProp){var v=i.shouldForwardProp;if(n.shouldForwardProp){var w=n.shouldForwardProp;y=function(e,t){return v(e,t)&&w(e,t)}}else y=v}var b=new un(r,g,o?i.componentStyle:void 0);function x(t,n){return function(t,n,r){var o=t.attrs,i=t.componentStyle,c=t.defaultProps,l=t.foldedComponentIds,u=t.styledComponentId,d=t.target,p=e.useContext(dn),h=tn(),f=t.shouldForwardProp||h.shouldForwardProp;"production"!==process.env.NODE_ENV&&a(u);var g=function(e,t,n){return void 0===n&&(n=He),e.theme!==n.theme&&e.theme||t||n.theme}(n,p,c)||He,m=function(e,t,n){for(var r,o=L(L({},t),{className:void 0,theme:n}),i=0;i<e.length;i+=1){var a=bt(r=e[i])?r(o):r;for(var s in a)o[s]="className"===s?kt(o[s],a[s]):"style"===s?L(L({},o[s]),a[s]):a[s]}return t.className&&(o.className=kt(o.className,t.className)),o}(o,n,g),y=m.as||d,v={};for(var w in m)void 0===m[w]||"$"===w[0]||"as"===w||"theme"===w&&m.theme===g||("forwardedAs"===w?v.as=m.forwardedAs:f&&!f(w,y)||(v[w]=m[w],f||"development"!==process.env.NODE_ENV||M(w)||hn.has(w)||!Ge.has(y)||(hn.add(w),console.warn('styled-components: it looks like an unknown prop "'.concat(w,'" is being sent through to the DOM, which will likely trigger a React console error. If you would like automatic filtering of unknown props, you can opt-into that behavior via `<StyleSheetManager shouldForwardProp={...}>` (connect an API like `@emotion/is-prop-valid`) or consider using transient props (`$` prefix for automatic filtering.)')))));var b=function(e,t){var n=tn(),r=e.generateAndInjectStyles(t,n.styleSheet,n.stylis);return"production"!==process.env.NODE_ENV&&a(r),r}(i,m);"production"!==process.env.NODE_ENV&&t.warnTooManyClasses&&t.warnTooManyClasses(b);var x=kt(l,u);return b&&(x+=" "+b),m.className&&(x+=" "+m.className),v[ot(y)&&!Ge.has(y)?"class":"className"]=x,r&&(v.ref=r),s(y,v)}(k,t,n)}x.displayName=f;var k=e.forwardRef(x);return k.attrs=m,k.componentStyle=b,k.displayName=f,k.shouldForwardProp=y,k.foldedComponentIds=o?kt(i.foldedComponentIds,i.styledComponentId):"",k.styledComponentId=g,k.target=o?i.target:t,Object.defineProperty(k,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(e){this._foldedDefaultProps=o?function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0,o=t;r<o.length;r++)Et(e,o[r],!0);return e}({},i.defaultProps,e):e}}),"production"!==process.env.NODE_ENV&&(Ue(f,g),k.warnTooManyClasses=function(e,t){var n={},r=!1;return function(o){if(!r&&(n[o]=!0,Object.keys(n).length>=200)){var i=t?' with the id of "'.concat(t,'"'):"";console.warn("Over ".concat(200," classes were generated for component ").concat(e).concat(i,".\n")+"Consider using the attrs method, together with a style object for frequently changed styles.\nExample:\n  const Component = styled.div.attrs(props => ({\n    style: {\n      background: props.background,\n    },\n  }))`width: 100%;`\n\n  <Component />"),r=!0,n={}}}}(f,g)),Ot(k,(function(){return".".concat(k.styledComponentId)})),c&&wt(k,t,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),k}function gn(e,t){for(var n=[e[0]],r=0,o=t.length;r<o;r+=1)n.push(t[r],e[r+1]);return n}var mn=function(e){return Object.assign(e,{isCss:!0})};function yn(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(bt(e)||jt(e))return mn(cn(gn(Ye,N([e],t,!0))));var r=e;return 0===t.length&&1===r.length&&"string"==typeof r[0]?cn(r):mn(cn(gn(r,t)))}function vn(e,t,n){if(void 0===n&&(n=He),!t)throw Rt(1,t);var r=function(r){for(var o=[],i=1;i<arguments.length;i++)o[i-1]=arguments[i];return e(t,n,yn.apply(void 0,N([r],o,!1)))};return r.attrs=function(r){return vn(e,t,L(L({},n),{attrs:Array.prototype.concat(n.attrs,r).filter(Boolean)}))},r.withConfig=function(r){return vn(e,t,L(L({},n),r))},r}var wn=function(e){return vn(fn,e)},bn=wn;Ge.forEach((function(e){bn[e]=wn(e)})),"production"!==process.env.NODE_ENV&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product&&console.warn("It looks like you've imported 'styled-components' on React Native.\nPerhaps you're looking to import 'styled-components/native'?\nRead more about this at https://www.styled-components.com/docs/basics#react-native");var xn="__sc-".concat(Ae,"__");"production"!==process.env.NODE_ENV&&"test"!==process.env.NODE_ENV&&"undefined"!=typeof window&&(window[xn]||(window[xn]=0),1===window[xn]&&console.warn("It looks like there are several instances of 'styled-components' initialized in this application. This may cause dynamic styles to not render properly, errors during the rehydration process, a missing theme prop, and makes your application bigger without good reason.\n\nSee https://s-c.sh/2BAXzed for more info."),window[xn]+=1);const kn=bn.div.attrs({className:"cutor-editor-container"})`
  display: flex;
  height: 100%;
  width: 100%;
  overflow: hidden;
`,Sn=bn.div.attrs({className:"cutor-editor-panel"})`
  background-color: #d1d5db;
  padding: 0.75rem;
  width: 50%;
  max-width: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  overflow: hidden;
  position: relative;
`,jn=bn.div.attrs({className:"cutor-editor-image-container"})`
  position: relative;
  width: ${e=>e.width}px;
  height: ${e=>e.height}px;
  cursor: ${e=>e.$isViewMode?"move":"default"};
`;const En=l(null);function On({children:e,initialState:o}){const i=function(e){const o=t(null),[i,a]=n(Object.assign({mode:x.DrawLine,lineWidth:20,scale:0},e)),s=r((e=>{a((t=>Object.assign(Object.assign({},t),{mode:e})))}),[]),c=r((e=>{a((t=>Object.assign(Object.assign({},t),{lineWidth:e})))}),[]),l=r((e=>{a((t=>Object.assign(Object.assign({},t),{scale:e})))}),[]),u=r((()=>{a((e=>Object.assign(Object.assign({},e),{reverse:!e.reverse})))}),[]),d=r((()=>{var e;null===(e=o.current)||void 0===e||e.undo()}),[]),p=r((()=>{var e;null===(e=o.current)||void 0===e||e.redo()}),[]);return{mode:i.mode,setMode:s,lineWidth:i.lineWidth,setLineWidth:c,reverse:i.reverse,toggleReverse:u,undo:d,redo:p,scale:i.scale,setScale:l,editorRef:o}}(o);return S.jsx(En.Provider,{value:i,children:e})}function Cn(){const e=c(En);if(!e)throw new Error("useEditorToolsContext must be used within an EditorToolsProvider");return e}function _n(e){const n=t(e);return n.current=i((()=>e),[e]),r(((...e)=>n.current(...e)),[])}const Rn={[x.DrawLine]:"none",[x.FrameSelect]:"crosshair",[x.View]:"move",[x.Erase]:"none"};f.pixelRatio=1;const In=e=>{const{imgUrl:a,maskImgUrl:s,maskColor:c="#df4b26",maskOpacity:l=.5,onFrameSelected:f,isMaskFn:g}=e,{mode:m,scale:y,setScale:v,lineWidth:w,reverse:b,editorRef:I}=Cn(),L=E(),N=D(),{img:A,imageSize:T,containerRef:M}=function(e,i){const[a]=P(e,"anonymous"),s=t(null),[c,l]=n({width:0,height:0}),u=r(((e,t)=>{if(0===e.width||0===e.height||0===t.width||0===t.height)return 1;const n=t.width/e.width,r=t.height/e.height;return Math.min(n,r)}),[]);return o((()=>{if(s.current){const e=s.current,t={width:(null==a?void 0:a.width)||0,height:(null==a?void 0:a.height)||0},n=u(t,{width:e.clientWidth/2-24,height:e.clientHeight-24});i(n),l(t)}}),[u,a,i]),o((()=>{const e=()=>{if(s.current){const e=s.current;i(u(c,{width:e.clientWidth/2-24,height:e.clientHeight-24}))}};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[u,c,i]),{setScale:i,img:a,imageSize:c,containerRef:s}}(a,v),$=function(e,a,s,c){const l=t(!1),[u,d]=n(null),p=c,[h,f]=n(null),g=r((t=>{l.current=!0;const n={x:t.nativeEvent.offsetX,y:t.nativeEvent.offsetY};n&&(d({mode:e,strokeWidth:p/s,points:[n.x/s,n.y/s]}),f({x:n.x,y:n.y}))}),[e,p,s]),m=r((e=>{const t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};t&&f({x:t.x,y:t.y}),l.current&&t&&d((e=>e?Object.assign(Object.assign({},e),{points:[...e.points,t.x/s,t.y/s]}):null))}),[s]),y=r((()=>{l.current&&u&&(l.current=!1,a.push({action:k.DrawLine,data:u}),d(null))}),[u,a]),v=r((e=>{if(f(null),!l.current)return;const t={x:e.nativeEvent.offsetX,y:e.nativeEvent.offsetY};t&&d((e=>e?Object.assign(Object.assign({},e),{points:[...e.points,t.x/s,t.y/s]}):null))}),[s]);o((()=>(window.addEventListener("mouseup",y),()=>{window.removeEventListener("mouseup",y)})),[y]);const w=i((()=>{if(!h)return null;const e=p/2,t=p>2?1:0;return S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:`0 0 ${p+2} ${p+2}`,width:p+2,height:p+2,style:{position:"absolute",top:(null==h?void 0:h.y)-e-t,left:(null==h?void 0:h.x)-e-t,zIndex:99,pointerEvents:"none"},children:S.jsx("circle",{cx:e+t,cy:e+t,r:e,fill:"rgba(255, 255, 255, 0.5)",stroke:"white",strokeWidth:t})})}),[h,p]);return{isDrawing:l.current,currentLine:u,handleMouseDown:g,handleMouseMove:m,handleMouseUp:y,handleMouseLeave:v,strokeWidth:p,brushCursor:w}}(m,L,y,w),F=R({onSelected:f,showBorderAfterDrag:!1}),z=_n((e=>{switch(m){case x.DrawLine:case x.Erase:$.handleMouseDown(e);break;case x.FrameSelect:F.onMouseDown(e);break;case x.View:N.handleDragStart(e)}})),W=_n((e=>{switch(m){case x.DrawLine:case x.Erase:$.handleMouseMove(e);break;default:return}})),B=_n((e=>{switch(m){case x.DrawLine:case x.Erase:$.handleMouseUp();break;default:return}})),V=_n((e=>{switch(m){case x.DrawLine:case x.Erase:$.handleMouseLeave(e);break;default:return}})),U=_n((e=>{if(e.ctrlKey){e.preventDefault();const t=-1e-4*e.deltaY,n=Math.min(Math.max(y+t,.001),5);v(n)}}));o((()=>{const e=M.current;return e&&e.addEventListener("wheel",U,{passive:!1}),()=>{e&&e.removeEventListener("wheel",U)}}),[M,U]);const Y=i((()=>({width:T.width*y,height:T.height*y})),[T,y]),H=_n((async function(e){const t=await function(e){return new Promise(((t,n)=>{const r=new Image;r.crossOrigin="anonymous",r.src=e,r.onload=()=>{t({width:r.width,height:r.height,img:r})},r.onerror=t=>{n(new Error("image load error: "+e+t))},r.onabort=()=>{n(new Error("image load abort: "+e))},setTimeout((()=>{n(new Error("image load timeout: "+e))}),1e5)}))}(e);L.push({action:k.AddMaskImage,data:{url:e,image:t.img}})}));o((()=>{s&&H(s)}),[]);const G=r((e=>{const t=T,n=document.createElement("canvas"),r=e||(t.width<1200?1:1200/t.width);n.width=t.width*r,n.height=t.height*r;const o=n.getContext("2d");if(!o)throw new Error("canvas context is null");return{canvas:n,ctx:o,scale:r}}),[T]),X=r(((e,t,n,r)=>{if(e.lineCap="round",e.lineJoin="round",e.strokeStyle=c,(r?t.mode!==x.Erase:t.mode===x.Erase)?e.globalCompositeOperation="destination-out":e.globalCompositeOperation="source-over",!(t.points.length<2)){e.lineWidth=t.strokeWidth*n,e.beginPath(),e.moveTo(t.points[0]*n,t.points[1]*n);for(let r=2;r<t.points.length;r+=2)e.lineTo(t.points[r]*n,t.points[r+1]*n);e.stroke()}}),[c]),q=r(((e,t)=>{const{canvas:n,ctx:r,scale:o}=G(t);if(!r)return null;if(0===e.length&&!$.currentLine)return n;for(let t=0;t<e.length;t++){const i=e[t];let a=i.data;switch(i.action){case k.DrawLine:X(r,a,o);break;case k.AddMaskImage:r.globalCompositeOperation="destination-over",r.drawImage(a.image,0,0,n.width,n.height)}}const i=function(e){const t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]:null}(c);if(!i)return null;const a=r.getImageData(0,0,n.width,n.height),s=a.data,l=g||O;for(let e=3;e<s.length;e+=4){const t=l(s[e-3],s[e-2],s[e-1],s[e])||C([s[e-3],s[e-2],s[e-1]],i);(b?!t:t)?(s[e-3]=i[0],s[e-2]=i[1],s[e-1]=i[2],s[e]=255):(s[e-3]=0,s[e-2]=0,s[e-1]=0,s[e]=0)}return r.putImageData(a,0,0),n}),[G,$.currentLine,c,g,X,b]),[K,Z]=n(null),[J,Q]=n(null),ee=r((function(e,t,n){const{ctx:r,canvas:o}=G(n);return r.drawImage(e,0,0,o.width,o.height),r.globalCompositeOperation="destination-out",t?(r.drawImage(t,0,0,o.width,o.height),o):o}),[G]),te=t(null);return o((()=>{if(0===L.records.length||!Y.width||!A)return;const e=q(L.records),t=ee(A,e);te.current=e,Z(e),Q(t)}),[A,L.records,$.currentLine,q,ee,Y.width]),o((()=>{if($.currentLine&&A){const{canvas:e,ctx:t,scale:n}=G();te.current&&t.drawImage(te.current,0,0,e.width,e.height),X(t,$.currentLine,n,b),Z(e);const r=ee(A,K);Q(r)}}),[G,$.currentLine,A,K,X,ee,b]),o((()=>{I&&(I.current={async getMaskImage(){const e=q(L.records,1);return null==e?void 0:e.toDataURL("image/png")},async getProcessedImage(){var e;if(!A)throw new Error("img is null");const t=q(L.records,1),n=ee(A,t,1);return{img:null==n?void 0:n.toDataURL("image/png"),trimImg:null===(e=_(n))||void 0===e?void 0:e.toDataURL("image/png")}},addMaskImageUrl:H,clearHistory:L.clear,undo:L.undo,redo:L.redo,setScale:v})}),[H,I,L,A,K,J,q,ee,v]),S.jsx(kn,{ref:M,children:A&&T.width>0&&T.height>0&&S.jsxs(S.Fragment,{children:[S.jsx(Sn,{children:S.jsxs(jn,{width:Y.width,height:Y.height,$isViewMode:m===x.View,style:Object.assign(Object.assign({},N.style),{cursor:Rn[m]}),onMouseDown:z,onMouseMove:W,onMouseUp:B,onMouseLeave:V,children:[j(m)&&$.brushCursor,F.SelectionBorder,S.jsxs(u,{width:Y.width,height:Y.height,children:[S.jsx(d,{children:S.jsx(p,{image:A,x:0,y:0,width:Y.width,height:Y.height})}),S.jsx(d,{opacity:l,children:K&&S.jsx(p,{image:K,x:0,y:0,width:Y.width,height:Y.height})})]})]})}),S.jsx(Sn,{children:S.jsxs(jn,{width:Y.width,height:Y.height,$isViewMode:m===x.View,style:N.style,onMouseDown:e=>{m===x.View&&N.handleDragStart(e)},children:[F.SelectionBorder,j(m)&&$.brushCursor,S.jsxs(u,{width:Y.width,height:Y.height,children:[S.jsx(d,{children:S.jsx(h,{sceneFunc:e=>{!function(e,t){const n=document.createElement("canvas");n.width=16,n.height=16;const r=n.getContext("2d");r&&(r.fillStyle="#dfdfdf",r.fillRect(0,0,16,16),r.fillStyle="#d4d4d4",r.beginPath(),r.moveTo(0,0),r.lineTo(8,0),r.lineTo(8,8),r.lineTo(0,8),r.closePath(),r.fill(),r.beginPath(),r.moveTo(8,8),r.lineTo(16,8),r.lineTo(16,16),r.lineTo(8,16),r.closePath(),r.fill()),e.fillStyle=e.createPattern(n,"repeat"),e.fillRect(0,0,t.width,t.height)}(e,Y)}})}),S.jsx(d,{children:J&&S.jsx(p,{image:J,x:0,y:0,width:Y.width,height:Y.height})})]})]})})]})})},Pn=bn.div`
  display: flex;
  gap: 0.5rem;
  ${e=>e.className}
`,Dn=bn.div`
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
  width: fit-content;
  ${e=>e.className}
`,Ln=bn.button`
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 4px;
  border-radius: 4px;

  border: none;
  background-color: transparent;
  cursor: pointer;
  color: white;
  line-height: 0;

  &:hover {
    background-color: #9ca3af;
  }

  &:focus {
    outline: none;
  }

  ${e=>e.$isActive&&yn`
      background-color: #9ca3af;
    `}
`,Nn=bn.div`
  height: 1rem;
  width: 1px;
  background-color: #9ca3af;
  margin: 0 0.25rem;
`,An=bn.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
`,Tn=bn.span`
  font-size: 0.75rem;
  white-space: nowrap;
`,Mn=bn.input`
  width: 100%;
  height: 0.375rem;
  background-color: #9ca3af;
  border-radius: 0.5rem;
  appearance: none;
  cursor: pointer;
`,$n=bn.span`
  font-size: 0.75rem;
  min-width: 1.5rem;
  text-align: center;
`,Fn=bn.div`
  display: flex;
  align-items: center;
  gap: 0.5rem;
  background-color: #6b7280;
  border-radius: 0.375rem;
  padding: 0.5rem;
  color: white;
  width: fit-content;
`,zn=bn.span`
  font-size: 0.875rem;
  font-weight: 500;
  min-width: 2.5rem;
  text-align: center;
`,Wn=bn.div`
  svg {
    height: 20px;
    width: 20px;
  }
`;function Bn({step:e=5,className:t=""}){const{mode:n,setMode:r,lineWidth:o,setLineWidth:i,scale:a,reverse:s,setScale:c,undo:l,redo:u,toggleReverse:d,editorRef:p}=Cn(),h=s?n===x.Erase:n===x.DrawLine,f=s?n===x.DrawLine:n===x.Erase;return S.jsxs(Pn,{className:t,children:[S.jsxs(Dn,{children:[S.jsx(Ln,{$isActive:h,onClick:()=>{r(s?x.Erase:x.DrawLine)},"aria-label":"Hand tool",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v0"}),S.jsx("path",{d:"M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v2"}),S.jsx("path",{d:"M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"}),S.jsx("path",{d:"M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"})]})})}),S.jsx(Ln,{$isActive:f,onClick:()=>{r(s?x.DrawLine:x.Erase)},"aria-label":"Paint tool",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M18.37 2.63 14 7l-1.59-1.59a2 2 0 0 0-2.82 0L8 7l9 9 1.59-1.59a2 2 0 0 0 0-2.82L17 10l4.37-4.37a2.12 2.12 0 1 0-3-3Z"}),S.jsx("path",{d:"M9 8c-2 3-4 3.5-7 4l8 10c2-1 6-5 6-7"}),S.jsx("path",{d:"M14.5 17.5 4.5 15"})]})})}),S.jsx(Ln,{$isActive:n===x.Erase,onClick:()=>r(x.Erase),"aria-label":"Erase tool",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21"}),S.jsx("path",{d:"M22 21H7"}),S.jsx("path",{d:"m5 11 9 9"})]})})}),S.jsx(Nn,{}),S.jsx(Ln,{onClick:l,"aria-label":"Undo",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M9 14 4 9l5-5"}),S.jsx("path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5v0a5.5 5.5 0 0 1-5.5 5.5H11"})]})})}),S.jsx(Ln,{onClick:u,"aria-label":"Redo",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"m15 14 5-5-5-5"}),S.jsx("path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5v0A5.5 5.5 0 0 0 9.5 20H13"})]})})}),S.jsx(Ln,{onClick:d,"aria-label":"Flip horizontally",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h3"}),S.jsx("path",{d:"M16 3h3a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-3"}),S.jsx("path",{d:"M12 20v2"}),S.jsx("path",{d:"M12 14v2"}),S.jsx("path",{d:"M12 8v2"}),S.jsx("path",{d:"M12 2v2"})]})})}),S.jsx(Ln,{onClick:()=>{var e;null===(e=p.current)||void 0===e||e.getProcessedImage().then((e=>{if(!e.img)return;const t=document.createElement("a");t.href=e.img,t.download="image.png",t.click()}))},"aria-label":"Download image",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),S.jsx("polyline",{points:"7 10 12 15 17 10"}),S.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]})})})]}),(n===x.DrawLine||n===x.Erase)&&S.jsxs(An,{children:[S.jsx(Tn,{children:":"}),S.jsx(Mn,{type:"range",min:"1",max:"100",value:o,onChange:e=>i(Number(e.target.value)),"aria-label":"Brush size"}),S.jsx($n,{children:o})]}),S.jsxs(Fn,{children:[S.jsx(Ln,{onClick:()=>{c(a-e/100)},"aria-label":"Zoom out",children:S.jsx(Wn,{children:S.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})})})}),S.jsxs(zn,{children:[Math.round(100*a),"%"]}),S.jsx(Ln,{onClick:()=>{c(a+e/100)},"aria-label":"Zoom in",children:S.jsx(Wn,{children:S.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[S.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),S.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]})})})]})]})}const Vn=bn.div.attrs({className:"cutor-editor"})`
  height: 100%;
  width: 100%;

  .cutor-editor-container {
    height: calc(100% - 84px);
  }

  .cutor-editor-tools {
    margin-top: 24px;
    justify-content: center;
  }
`;function Un(e){return S.jsx(Vn,{style:{height:e.height},children:S.jsxs(On,{initialState:{mode:x.FrameSelect},children:[S.jsx(In,Object.assign({},e)),S.jsx(Bn,{className:"cutor-editor-tools"})]})})}export{On as EditorContextProvider,In as EditorCore,x as EditorMode,k as HistoryAction,Bn as ToolControlPanel,Un as default,D as useDragble,Cn as useEditorContext,R as useFrameSelection,E as useHistoryRecords,_n as useMemoFn};
